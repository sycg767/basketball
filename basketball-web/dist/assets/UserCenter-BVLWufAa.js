import{_ as H,j as K,r as y,t as O,E as g,d as C,b as s,e,a as o,f as h,B as c,u as a,g as N,m as Q,o as k,n as G,i as r,N as J,H as W,O as u,K as D,L as M,P as X,Q as Y,R as L,y as Z,M as $}from"./index-zUzrFZpX.js";import{g as ss,a as ts,b as es}from"./member-DdAKiQtd.js";import{A as os}from"./AnnouncementSection-Dbk3Nzsp.js";import"./request-BICGRQIW.js";const as={class:"user-center-container"},is={class:"user-header"},ns={class:"header-content"},ls={class:"logo-section"},cs={class:"user-info"},ds={class:"username"},rs={class:"user-content"},us={class:"user-info-card"},_s={class:"card-content"},vs={class:"user-avatar"},ms={class:"user-details"},fs={class:"user-meta"},ps={key:0,class:"member-level"},ys={class:"user-id"},gs={key:0,class:"member-benefits"},hs={class:"account-panel"},bs={class:"account-item"},Cs={class:"account-value"},ks={class:"account-item"},xs={class:"account-value"},ws={class:"account-item"},Ts={class:"account-value small-text"},zs={class:"quick-actions"},Bs={class:"actions-grid"},Ns={class:"action-icon blue"},Ds={class:"action-icon green"},Ms={class:"action-icon orange"},Ls={class:"action-icon purple"},Ps={class:"action-icon gold"},Us={class:"action-icon red"},Es={class:"action-icon cyan"},Rs={class:"announcement-section"},Ss={class:"recent-activities"},Vs={class:"activity-list"},Is={class:"activity-item"},As={class:"activity-icon blue"},js={class:"activity-status"},qs={class:"activity-item"},Fs={class:"activity-icon orange"},Hs={class:"activity-status"},Ks={class:"activity-item"},Os={class:"activity-icon green"},Qs={class:"activity-status"},Gs={__name:"UserCenter",setup(Js){const l=Q(),n=K(),x=y(0),w=y(0),b=y(""),T=y([]);O(async()=>{await z()});const z=async()=>{var v;try{const[t,i,m]=await Promise.all([ss(),ts(),es({current:1,size:10})]);if(t.code===200&&(x.value=t.data||0),i.code===200&&(w.value=i.data||0),m.code===200){T.value=((v=m.data)==null?void 0:v.records)||[];const _=T.value.filter(d=>d.status===1);if(_.length>0){const d=_.reduce((f,p)=>f.expireTime?p.expireTime&&new Date(p.expireTime)>new Date(f.expireTime)?p:f:p);d.expireTime&&(b.value=new Date(d.expireTime).toLocaleDateString("zh-CN"))}else b.value="未开通"}}catch(t){console.error("获取用户数据失败:",t),g.error("获取用户数据失败")}},P=async()=>{g.info("正在刷新数据..."),await z(),g.success("数据已更新")},U=async()=>{try{await $.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),n.logout(),l.push("/login"),g.success("已退出登录")}catch{}},B=()=>(n.realName||n.username||"用户").charAt(0).toUpperCase(),E=()=>({1:"银卡会员",2:"金卡会员",3:"钻石会员"})[n.memberLevel]||"普通会员",R=()=>{l.push("/venue")},S=()=>{l.push("/booking")},V=()=>{l.push("/course")},I=()=>{l.push("/member/card")},A=()=>{l.push("/member/points")},j=()=>{l.push("/payment/method")},q=()=>{l.push("/notification/list")},F=()=>{l.push("/profile")};return(v,t)=>{const i=h("el-icon"),m=h("el-avatar"),_=h("el-button"),d=h("el-tag");return k(),C("div",as,[s("div",is,[s("div",ns,[s("div",ls,[e(i,{size:28,color:"#ffffff"},{default:o(()=>[e(a(G))]),_:1}),t[0]||(t[0]=s("h1",null,"用户中心",-1))]),s("div",cs,[e(m,{size:32,style:{"margin-right":"12px"}},{default:o(()=>[r(c(B()),1)]),_:1}),s("span",ds,c(a(n).realName||a(n).username||"用户"),1),e(_,{type:"primary",link:"",onClick:F},{default:o(()=>[...t[1]||(t[1]=[r("个人中心",-1)])]),_:1}),e(_,{type:"info",link:"",onClick:P},{default:o(()=>[e(i,{size:14},{default:o(()=>[e(a(J))]),_:1}),t[2]||(t[2]=r(" 刷新 ",-1))]),_:1}),e(_,{type:"danger",link:"",onClick:U},{default:o(()=>[...t[3]||(t[3]=[r("退出",-1)])]),_:1})])])]),s("div",rs,[s("div",us,[s("div",_s,[s("div",vs,[e(m,{size:80},{default:o(()=>[r(c(B()),1)]),_:1})]),s("div",ms,[s("h2",null,c(a(n).realName||a(n).username||"用户"),1),s("div",fs,[a(n).memberLevel>0?(k(),C("span",ps,c(E()),1)):N("",!0),s("span",ys,"ID: "+c(a(n).userId),1)]),a(n).memberLevel>0?(k(),C("div",gs,[...t[4]||(t[4]=[s("p",null,"✨ 会员专享权益：场地预订折扣、优先选场、积分加倍",-1)])])):N("",!0)])]),s("div",hs,[s("div",bs,[t[5]||(t[5]=s("div",{class:"account-label"},"积分余额",-1)),s("div",Cs,c(x.value),1)]),s("div",ks,[t[6]||(t[6]=s("div",{class:"account-label"},"账户余额",-1)),s("div",xs,"¥"+c(w.value.toFixed(2)),1)]),s("div",ws,[t[7]||(t[7]=s("div",{class:"account-label"},"会员到期",-1)),s("div",Ts,c(b.value||"未开通"),1)])])]),s("div",zs,[t[15]||(t[15]=s("h3",{class:"section-title"},"快捷功能",-1)),s("div",Bs,[s("div",{class:"action-card",onClick:R},[s("div",Ns,[e(i,{size:32},{default:o(()=>[e(a(W))]),_:1})]),t[8]||(t[8]=s("div",{class:"action-content"},[s("h4",null,"场地预订"),s("p",null,"查看和预订篮球场地")],-1)),e(i,{class:"arrow-icon"},{default:o(()=>[e(a(u))]),_:1})]),s("div",{class:"action-card",onClick:S},[s("div",Ds,[e(i,{size:32},{default:o(()=>[e(a(D))]),_:1})]),t[9]||(t[9]=s("div",{class:"action-content"},[s("h4",null,"我的预订"),s("p",null,"查看预订记录和状态")],-1)),e(i,{class:"arrow-icon"},{default:o(()=>[e(a(u))]),_:1})]),s("div",{class:"action-card",onClick:V},[s("div",Ms,[e(i,{size:32},{default:o(()=>[e(a(M))]),_:1})]),t[10]||(t[10]=s("div",{class:"action-content"},[s("h4",null,"课程报名"),s("p",null,"查看和报名篮球课程")],-1)),e(i,{class:"arrow-icon"},{default:o(()=>[e(a(u))]),_:1})]),s("div",{class:"action-card",onClick:I},[s("div",Ls,[e(i,{size:32},{default:o(()=>[e(a(X))]),_:1})]),t[11]||(t[11]=s("div",{class:"action-content"},[s("h4",null,"会员中心"),s("p",null,"查看会员卡和权益")],-1)),e(i,{class:"arrow-icon"},{default:o(()=>[e(a(u))]),_:1})]),s("div",{class:"action-card",onClick:A},[s("div",Ps,[e(i,{size:32},{default:o(()=>[e(a(Y))]),_:1})]),t[12]||(t[12]=s("div",{class:"action-content"},[s("h4",null,"我的积分"),s("p",null,"查看积分余额和明细")],-1)),e(i,{class:"arrow-icon"},{default:o(()=>[e(a(u))]),_:1})]),s("div",{class:"action-card",onClick:j},[s("div",Us,[e(i,{size:32},{default:o(()=>[e(a(L))]),_:1})]),t[13]||(t[13]=s("div",{class:"action-content"},[s("h4",null,"支付管理"),s("p",null,"管理支付方式和账单")],-1)),e(i,{class:"arrow-icon"},{default:o(()=>[e(a(u))]),_:1})]),s("div",{class:"action-card",onClick:q},[s("div",Es,[e(i,{size:32},{default:o(()=>[e(a(Z))]),_:1})]),t[14]||(t[14]=s("div",{class:"action-content"},[s("h4",null,"通知中心"),s("p",null,"查看系统通知和消息")],-1)),e(i,{class:"arrow-icon"},{default:o(()=>[e(a(u))]),_:1})])])]),s("div",Rs,[e(os)]),s("div",Ss,[t[22]||(t[22]=s("h3",{class:"section-title"},"最近活动",-1)),s("div",Vs,[s("div",Is,[s("div",As,[e(i,null,{default:o(()=>[e(a(D))]),_:1})]),t[17]||(t[17]=s("div",{class:"activity-content"},[s("h4",null,"场地预订"),s("p",{class:"activity-time"},"2小时前")],-1)),s("div",js,[e(d,{type:"success",size:"small"},{default:o(()=>[...t[16]||(t[16]=[r("已确认",-1)])]),_:1})])]),s("div",qs,[s("div",Fs,[e(i,null,{default:o(()=>[e(a(M))]),_:1})]),t[19]||(t[19]=s("div",{class:"activity-content"},[s("h4",null,"课程报名"),s("p",{class:"activity-time"},"1天前")],-1)),s("div",Hs,[e(d,{type:"primary",size:"small"},{default:o(()=>[...t[18]||(t[18]=[r("进行中",-1)])]),_:1})])]),s("div",Ks,[s("div",Os,[e(i,null,{default:o(()=>[e(a(L))]),_:1})]),t[21]||(t[21]=s("div",{class:"activity-content"},[s("h4",null,"积分兑换"),s("p",{class:"activity-time"},"3天前")],-1)),s("div",Qs,[e(d,{type:"info",size:"small"},{default:o(()=>[...t[20]||(t[20]=[r("已完成",-1)])]),_:1})])])])])])])}}},$s=H(Gs,[["__scopeId","data-v-869bec1a"]]);export{$s as default};
