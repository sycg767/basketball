import{_ as U,k as D,M as F,f as o,c as k,o as i,a as t,b as n,e,i as d,y as m,d as C,g as x,u as V,O,P as J,J as Q,C as A,F as M,q as j,j as G,r as N,n as H,Q as K,R as W,E as X,S as Y,T as Z}from"./index-Do8XCnNk.js";import{g as ee}from"./venue-BjX1hId4.js";import"./request-fDvtbK_n.js";const te={class:"venue-image"},le=["src","alt"],ae={class:"venue-info"},ne={class:"venue-header"},oe={class:"venue-name"},se={class:"venue-code"},ue={class:"venue-details"},ie={class:"detail-item"},de={class:"detail-item"},re={class:"detail-item"},ce={class:"detail-item"},_e={key:0,class:"venue-facilities"},ve={class:"venue-footer"},me="https://via.placeholder.com/400x250?text=Basketball+Court",S=4,pe={__name:"VenueCard",props:{venue:{type:Object,required:!0},showBooking:{type:Boolean,default:!0}},emits:["booking"],setup(s,{emit:a}){const r=s,g=D(),w={1:"室内全场",2:"室内半场",3:"室外全场",4:"室外半场"},c=F(()=>r.venue.facilities?r.venue.facilities.split(",").filter(_=>_.trim()):[]),y=F(()=>c.value.slice(0,S)),T=F(()=>c.value.length>S),L=()=>{g.push(`/venue/${r.venue.id}`)},$=()=>{g.push(`/booking/create/${r.venue.id}`)};return(_,l)=>{const p=o("el-tag"),h=o("el-icon"),b=o("el-col"),f=o("el-row"),v=o("el-button"),B=o("el-card");return i(),k(B,{class:"venue-card","body-style":{padding:"0px"},shadow:"hover"},{default:t(()=>[n("div",te,[n("img",{src:s.venue.imageUrl||me,alt:s.venue.venueName},null,8,le),e(p,{class:"venue-status",type:s.venue.status===1?"success":"danger",size:"small"},{default:t(()=>[d(m(s.venue.status===1?"可用":"维护中"),1)]),_:1},8,["type"])]),n("div",ae,[n("div",ne,[n("h3",oe,m(s.venue.venueName),1),n("span",se,m(s.venue.venueCode),1)]),n("div",ue,[e(f,{gutter:10},{default:t(()=>[e(b,{span:12},{default:t(()=>[n("div",ie,[e(h,null,{default:t(()=>[e(V(O))]),_:1}),n("span",null,m(s.venue.location||"未设置"),1)])]),_:1}),e(b,{span:12},{default:t(()=>[n("div",de,[e(h,null,{default:t(()=>[e(V(J))]),_:1}),n("span",null,m(s.venue.area)+"㎡",1)])]),_:1})]),_:1}),e(f,{gutter:10},{default:t(()=>[e(b,{span:12},{default:t(()=>[n("div",re,[e(h,null,{default:t(()=>[e(V(Q))]),_:1}),n("span",null,m(s.venue.capacity)+"人",1)])]),_:1}),e(b,{span:12},{default:t(()=>[n("div",ce,[e(h,null,{default:t(()=>[e(V(A))]),_:1}),n("span",null,m(w[s.venue.venueType]||s.venue.venueType),1)])]),_:1})]),_:1})]),s.venue.facilities?(i(),C("div",_e,[(i(!0),C(M,null,j(y.value,z=>(i(),k(p,{key:z,size:"small",type:"info"},{default:t(()=>[d(m(z),1)]),_:2},1024))),128)),T.value?(i(),k(p,{key:0,size:"small",type:"info"},{default:t(()=>[d(" +"+m(c.value.length-S),1)]),_:1})):x("",!0)])):x("",!0),n("div",ve,[e(v,{type:"primary",onClick:L},{default:t(()=>[...l[0]||(l[0]=[d(" 查看详情 ",-1)])]),_:1}),s.showBooking&&s.venue.status===1?(i(),k(v,{key:0,onClick:$},{default:t(()=>[...l[1]||(l[1]=[d(" 立即预订 ",-1)])]),_:1})):x("",!0)])])]),_:1})}}},fe=U(pe,[["__scopeId","data-v-ee3dcb76"]]),ge={class:"venue-list-container"},ye={class:"page-header"},he={class:"venue-grid"},be={key:0,class:"pagination-container"},ke={__name:"VenueList",setup(s){D();const a=G({keyword:"",venueType:null,status:null,page:1,size:6}),r=N(!1),g=N([]),w=N(0),c=async()=>{r.value=!0;try{const _=await ee(a);_.code===200&&(g.value=_.data.records||[],w.value=_.data.total||0)}catch(_){console.error("获取场地列表失败：",_),X.error("获取场地列表失败")}finally{r.value=!1}},y=()=>{a.page=1,c()},T=()=>{a.keyword="",a.venueType=null,a.status=null,a.page=1,c()},L=()=>{a.page=1,c()},$=()=>{c()};return H(()=>{c()}),(_,l)=>{const p=o("el-breadcrumb-item"),h=o("el-breadcrumb"),b=o("el-input"),f=o("el-form-item"),v=o("el-option"),B=o("el-select"),z=o("el-button"),q=o("el-form"),E=o("el-card"),I=o("el-empty"),P=o("el-pagination"),R=W("loading");return i(),C("div",ge,[n("div",ye,[l[8]||(l[8]=n("h2",null,"场地列表",-1)),e(h,{separator:"/"},{default:t(()=>[e(p,{to:{path:"/"}},{default:t(()=>[...l[5]||(l[5]=[d("首页",-1)])]),_:1}),e(p,null,{default:t(()=>[...l[6]||(l[6]=[d("场地管理",-1)])]),_:1}),e(p,null,{default:t(()=>[...l[7]||(l[7]=[d("场地列表",-1)])]),_:1})]),_:1})]),e(E,{class:"search-card",shadow:"never"},{default:t(()=>[e(q,{model:a,inline:!0},{default:t(()=>[e(f,{label:"关键词"},{default:t(()=>[e(b,{modelValue:a.keyword,"onUpdate:modelValue":l[0]||(l[0]=u=>a.keyword=u),placeholder:"场地名称/编码",clearable:"",onClear:y},null,8,["modelValue"])]),_:1}),e(f,{label:"场地类型"},{default:t(()=>[e(B,{modelValue:a.venueType,"onUpdate:modelValue":l[1]||(l[1]=u=>a.venueType=u),placeholder:"请选择",clearable:"",onChange:y},{default:t(()=>[e(v,{label:"室内全场",value:1}),e(v,{label:"室内半场",value:2}),e(v,{label:"室外全场",value:3}),e(v,{label:"室外半场",value:4})]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"状态"},{default:t(()=>[e(B,{modelValue:a.status,"onUpdate:modelValue":l[2]||(l[2]=u=>a.status=u),placeholder:"请选择",clearable:"",onChange:y},{default:t(()=>[e(v,{label:"可用",value:1}),e(v,{label:"维护中",value:0})]),_:1},8,["modelValue"])]),_:1}),e(f,null,{default:t(()=>[e(z,{type:"primary",icon:V(Y),onClick:y},{default:t(()=>[...l[9]||(l[9]=[d(" 搜索 ",-1)])]),_:1},8,["icon"]),e(z,{icon:V(Z),onClick:T},{default:t(()=>[...l[10]||(l[10]=[d(" 重置 ",-1)])]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),_:1}),K((i(),C("div",he,[g.value.length===0&&!r.value?(i(),k(I,{key:0,description:"暂无场地数据"})):x("",!0),(i(!0),C(M,null,j(g.value,u=>(i(),k(fe,{key:u.id,venue:u,"show-booking":!0},null,8,["venue"]))),128))])),[[R,r.value]]),w.value>0?(i(),C("div",be,[e(P,{"current-page":a.page,"onUpdate:currentPage":l[3]||(l[3]=u=>a.page=u),"page-size":a.size,"onUpdate:pageSize":l[4]||(l[4]=u=>a.size=u),"page-sizes":[6,12,24,48],total:w.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:L,onCurrentChange:$},null,8,["current-page","page-size","total"])])):x("",!0)])}}},ze=U(ke,[["__scopeId","data-v-a7550606"]]);export{ze as default};
