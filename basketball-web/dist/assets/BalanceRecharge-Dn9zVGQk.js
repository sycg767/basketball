import{_ as A,r as _,k as E,t as I,d as k,b as a,e as t,a as s,f as l,m as U,o as w,F as M,N as S,i as y,v as f,u as c,ad as W,a9 as D,al as v,E as L}from"./index-DqRIPXSt.js";import{a as $,h as j}from"./member-Ch_HX4wW.js";import{B as G}from"./BackButton-CB8aFD-N.js";const H={class:"balance-recharge-container"},J={class:"page-header"},K={class:"card-header"},O={class:"current-balance"},P={class:"balance-amount"},Q={class:"form-section"},X={class:"quick-amounts"},Y={class:"form-section"},Z={class:"payment-option"},ee={class:"payment-icon wechat"},ae={class:"payment-option"},te={class:"payment-icon alipay"},se={class:"recharge-tips"},ne={class:"tip-item"},oe={class:"tip-item"},le={class:"tip-item"},ie={class:"action-buttons"},re={__name:"BalanceRecharge",setup(ce){const d=U(),u=_(null),m=_(!1),g=_(0),B=[50,100,200,500],n=E({amount:null,paymentType:"wechat_native",clientIp:""}),N={amount:[{required:!0,message:"请选择或输入充值金额",trigger:"blur"},{type:"number",min:1,message:"充值金额必须大于0",trigger:"blur"}],paymentType:[{required:!0,message:"请选择支付方式",trigger:"change"}]},T=async()=>{try{const o=await $();o.code===200&&(g.value=o.data)}catch(o){console.error("获取余额失败:",o)}},x=async()=>{if(u.value)try{await u.value.validate(),m.value=!0;const o=await j({amount:n.amount,paymentType:n.paymentType,clientIp:"127.0.0.1"});if(o.code===200){const e=o.data;n.paymentType.startsWith("wechat")?d.push({path:"/payment/wechat",query:{businessNo:e.businessNo||e.paymentNo,businessType:"balance_recharge",businessName:"账户余额充值",amount:n.amount}}):n.paymentType.startsWith("alipay")&&d.push({path:"/payment/alipay",query:{businessNo:e.businessNo||e.paymentNo,businessType:"balance_recharge",businessName:"账户余额充值",amount:n.amount}})}}catch(o){o.message&&L.error(o.message)}finally{m.value=!1}},F=()=>{d.back()};return I(()=>{T()}),(o,e)=>{const V=l("el-divider"),p=l("el-button"),C=l("el-input-number"),h=l("el-form-item"),r=l("el-icon"),b=l("el-radio"),q=l("el-radio-group"),R=l("el-form"),z=l("el-card");return w(),k("div",H,[a("div",J,[t(G,{text:"返回"})]),t(z,{class:"recharge-card"},{header:s(()=>[a("div",K,[e[3]||(e[3]=a("h2",null,"账户余额充值",-1)),a("div",O,[e[2]||(e[2]=a("div",{class:"balance-label"},"当前余额",-1)),a("div",P,"¥"+f(g.value),1)])])]),default:s(()=>[t(V,{style:{margin:"0 0 24px 0"}}),t(R,{model:n,rules:N,ref_key:"formRef",ref:u,"label-width":"0"},{default:s(()=>[t(h,{prop:"amount"},{default:s(()=>[a("div",Q,[e[4]||(e[4]=a("div",{class:"section-label"},"充值金额",-1)),a("div",X,[(w(),k(M,null,S(B,i=>t(p,{key:i,type:n.amount===i?"primary":"",onClick:de=>n.amount=i,class:"amount-btn"},{default:s(()=>[y(" ¥"+f(i),1)]),_:2},1032,["type","onClick"])),64))]),t(C,{modelValue:n.amount,"onUpdate:modelValue":e[0]||(e[0]=i=>n.amount=i),min:1,max:1e4,precision:2,"controls-position":"right",placeholder:"或输入自定义金额",style:{width:"100%","margin-top":"12px"}},null,8,["modelValue"])])]),_:1}),t(h,{prop:"paymentType"},{default:s(()=>[a("div",Y,[e[7]||(e[7]=a("div",{class:"section-label"},"支付方式",-1)),t(q,{modelValue:n.paymentType,"onUpdate:modelValue":e[1]||(e[1]=i=>n.paymentType=i),class:"payment-methods"},{default:s(()=>[t(b,{value:"wechat_native",class:"payment-radio"},{default:s(()=>[a("div",Z,[a("div",ee,[t(r,{size:24},{default:s(()=>[t(c(W))]),_:1})]),e[5]||(e[5]=a("div",{class:"payment-info"},[a("div",{class:"payment-name"},"微信支付"),a("div",{class:"payment-desc"},"扫码支付")],-1))])]),_:1}),t(b,{value:"alipay_page",class:"payment-radio"},{default:s(()=>[a("div",ae,[a("div",te,[t(r,{size:24},{default:s(()=>[t(c(D))]),_:1})]),e[6]||(e[6]=a("div",{class:"payment-info"},[a("div",{class:"payment-name"},"支付宝支付"),a("div",{class:"payment-desc"},"扫码支付")],-1))])]),_:1})]),_:1},8,["modelValue"])])]),_:1}),a("div",se,[a("div",ne,[t(r,{color:"#007AFF"},{default:s(()=>[t(c(v))]),_:1}),e[8]||(e[8]=a("span",null,"充值金额将实时到账",-1))]),a("div",oe,[t(r,{color:"#007AFF"},{default:s(()=>[t(c(v))]),_:1}),e[9]||(e[9]=a("span",null,"余额可用于支付预订订单",-1))]),a("div",le,[t(r,{color:"#007AFF"},{default:s(()=>[t(c(v))]),_:1}),e[10]||(e[10]=a("span",null,"余额永久有效，不会过期",-1))])])]),_:1},8,["model"]),a("div",ie,[t(p,{size:"large",onClick:F},{default:s(()=>[...e[11]||(e[11]=[y("取消",-1)])]),_:1}),t(p,{type:"primary",size:"large",loading:m.value,onClick:x},{default:s(()=>[y(" 立即充值 ¥"+f(n.amount||0),1)]),_:1},8,["loading"])])]),_:1})])}}},_e=A(re,[["__scopeId","data-v-8afc6f3e"]]);export{_e as default};
