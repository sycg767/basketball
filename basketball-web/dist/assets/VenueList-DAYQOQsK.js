import{_ as R,m as S,$ as N,f as i,c as b,o as d,a as t,b as s,e,i as g,B as _,d as h,g as z,u as k,a1 as j,a2 as q,I as O,n as A,F as D,x as I,k as G,r as $,t as H,a3 as J,a4 as K,E as Q,a5 as W,N as X}from"./index-zUzrFZpX.js";import{g as Y}from"./venue-BrYgpQev.js";import{B as Z}from"./BackButton-BCA-o-ra.js";const ee={class:"venue-image"},le=["src","alt"],te={class:"venue-info"},ae={class:"venue-header"},ne={class:"venue-name"},se={class:"venue-code"},oe={class:"venue-details"},ue={class:"detail-item"},ie={class:"detail-item"},de={class:"detail-item"},re={class:"detail-item"},ce={key:0,class:"venue-facilities"},ve={class:"venue-footer"},pe="https://via.placeholder.com/400x250?text=Basketball+Court",F=4,_e={__name:"VenueCard",props:{venue:{type:Object,required:!0},showBooking:{type:Boolean,default:!0}},emits:["booking"],setup(o,{emit:l}){const v=o,y=S(),V={1:"室内全场",2:"室内半场",3:"室外全场",4:"室外半场"},p=N(()=>v.venue.facilities?v.venue.facilities.split(",").filter(c=>c.trim()):[]),m=N(()=>p.value.slice(0,F)),B=N(()=>p.value.length>F),T=()=>{y.push(`/venue/${v.venue.id}`)},U=()=>{y.push(`/booking/create/${v.venue.id}`)};return(c,a)=>{const C=i("el-tag"),r=i("el-icon"),n=i("el-col"),f=i("el-row"),w=i("el-button"),L=i("el-card");return d(),b(L,{class:"venue-card","body-style":{padding:"0px"},shadow:"hover"},{default:t(()=>[s("div",ee,[s("img",{src:o.venue.imageUrl||pe,alt:o.venue.venueName},null,8,le),e(C,{class:"venue-status",type:o.venue.status===1?"success":"danger",size:"small"},{default:t(()=>[g(_(o.venue.status===1?"可用":"维护中"),1)]),_:1},8,["type"])]),s("div",te,[s("div",ae,[s("h3",ne,_(o.venue.venueName),1),s("span",se,_(o.venue.venueCode),1)]),s("div",oe,[e(f,{gutter:10},{default:t(()=>[e(n,{span:12},{default:t(()=>[s("div",ue,[e(r,null,{default:t(()=>[e(k(j))]),_:1}),s("span",null,_(o.venue.location||"未设置"),1)])]),_:1}),e(n,{span:12},{default:t(()=>[s("div",ie,[e(r,null,{default:t(()=>[e(k(q))]),_:1}),s("span",null,_(o.venue.area)+"㎡",1)])]),_:1})]),_:1}),e(f,{gutter:10},{default:t(()=>[e(n,{span:12},{default:t(()=>[s("div",de,[e(r,null,{default:t(()=>[e(k(O))]),_:1}),s("span",null,_(o.venue.capacity)+"人",1)])]),_:1}),e(n,{span:12},{default:t(()=>[s("div",re,[e(r,null,{default:t(()=>[e(k(A))]),_:1}),s("span",null,_(V[o.venue.venueType]||o.venue.venueType),1)])]),_:1})]),_:1})]),o.venue.facilities?(d(),h("div",ce,[(d(!0),h(D,null,I(m.value,x=>(d(),b(C,{key:x,size:"small",type:"info"},{default:t(()=>[g(_(x),1)]),_:2},1024))),128)),B.value?(d(),b(C,{key:0,size:"small",type:"info"},{default:t(()=>[g(" +"+_(p.value.length-F),1)]),_:1})):z("",!0)])):z("",!0),s("div",ve,[e(w,{type:"primary",onClick:T},{default:t(()=>[...a[0]||(a[0]=[g(" 查看详情 ",-1)])]),_:1}),o.showBooking&&o.venue.status===1?(d(),b(w,{key:0,onClick:U},{default:t(()=>[...a[1]||(a[1]=[g(" 立即预订 ",-1)])]),_:1})):z("",!0)])])]),_:1})}}},me=R(_e,[["__scopeId","data-v-86995922"]]),fe={class:"venue-list-container"},ge={class:"venue-grid"},ye={key:0,class:"pagination-container"},be={__name:"VenueList",setup(o){S();const l=G({keyword:"",venueType:null,status:null,priceRange:null,facilities:[],page:1,size:6}),v=$(!1),y=$([]),V=$(0),p=async()=>{v.value=!0;try{const c={page:l.page,size:l.size};l.keyword&&(c.keyword=l.keyword),l.venueType&&(c.venueType=l.venueType.toString()),l.status!==null&&(c.status=l.status);const a=await Y(c);a.code===200&&(y.value=a.data.records||[],V.value=a.data.total||0)}catch(c){console.error("获取场地列表失败：",c),Q.error("获取场地列表失败")}finally{v.value=!1}},m=()=>{l.page=1,p()},B=()=>{l.keyword="",l.venueType=null,l.status=null,l.priceRange=null,l.facilities=[],l.page=1,p()},T=()=>{l.page=1,p()},U=()=>{p()};return H(()=>{p()}),(c,a)=>{const C=i("el-input"),r=i("el-form-item"),n=i("el-option"),f=i("el-select"),w=i("el-button"),L=i("el-form"),x=i("el-card"),M=i("el-empty"),E=i("el-pagination"),P=K("loading");return d(),h("div",fe,[e(Z,{text:"返回"}),a[9]||(a[9]=s("h2",{class:"page-title"},"场地列表",-1)),e(x,{class:"search-card",shadow:"never"},{default:t(()=>[e(L,{model:l,inline:!0},{default:t(()=>[e(r,{label:"关键词"},{default:t(()=>[e(C,{modelValue:l.keyword,"onUpdate:modelValue":a[0]||(a[0]=u=>l.keyword=u),placeholder:"场地名称/编码",clearable:"",onClear:m},null,8,["modelValue"])]),_:1}),e(r,{label:"场地类型"},{default:t(()=>[e(f,{modelValue:l.venueType,"onUpdate:modelValue":a[1]||(a[1]=u=>l.venueType=u),placeholder:"请选择",clearable:"",onChange:m},{default:t(()=>[e(n,{label:"室内全场",value:1}),e(n,{label:"室内半场",value:2}),e(n,{label:"室外全场",value:3}),e(n,{label:"室外半场",value:4})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"状态"},{default:t(()=>[e(f,{modelValue:l.status,"onUpdate:modelValue":a[2]||(a[2]=u=>l.status=u),placeholder:"请选择",clearable:"",onChange:m},{default:t(()=>[e(n,{label:"可用",value:1}),e(n,{label:"维护中",value:0})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"价格范围"},{default:t(()=>[e(f,{modelValue:l.priceRange,"onUpdate:modelValue":a[3]||(a[3]=u=>l.priceRange=u),placeholder:"请选择",clearable:"",onChange:m},{default:t(()=>[e(n,{label:"0-50元",value:1}),e(n,{label:"50-100元",value:2}),e(n,{label:"100-200元",value:3}),e(n,{label:"200元以上",value:4})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"设施"},{default:t(()=>[e(f,{modelValue:l.facilities,"onUpdate:modelValue":a[4]||(a[4]=u=>l.facilities=u),placeholder:"请选择",clearable:"",multiple:"","collapse-tags":"",onChange:m},{default:t(()=>[e(n,{label:"空调",value:1}),e(n,{label:"更衣室",value:2}),e(n,{label:"淋浴",value:3}),e(n,{label:"停车场",value:4}),e(n,{label:"餐饮",value:5})]),_:1},8,["modelValue"])]),_:1}),e(r,null,{default:t(()=>[e(w,{type:"primary",icon:k(W),onClick:m},{default:t(()=>[...a[7]||(a[7]=[g(" 搜索 ",-1)])]),_:1},8,["icon"]),e(w,{icon:k(X),onClick:B},{default:t(()=>[...a[8]||(a[8]=[g(" 重置 ",-1)])]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),_:1}),J((d(),h("div",ge,[y.value.length===0&&!v.value?(d(),b(M,{key:0,description:"暂无场地数据"})):z("",!0),(d(!0),h(D,null,I(y.value,u=>(d(),b(me,{key:u.id,venue:u,"show-booking":!0},null,8,["venue"]))),128))])),[[P,v.value]]),V.value>0?(d(),h("div",ye,[e(E,{"current-page":l.page,"onUpdate:currentPage":a[5]||(a[5]=u=>l.page=u),"page-size":l.size,"onUpdate:pageSize":a[6]||(a[6]=u=>l.size=u),"page-sizes":[6,12,24,48],total:V.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:T,onCurrentChange:U},null,8,["current-page","page-size","total"])])):z("",!0)])}}},Ce=R(be,[["__scopeId","data-v-b59be52d"]]);export{Ce as default};
