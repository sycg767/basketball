import{_ as A}from"./BarChart-A0GaMyh4.js";import{d as R,e as B,f as E}from"./analytics-BpXSRZ2d.js";import{_ as z,r,n as H,E as M,d as P,b as i,e,a as t,f as o,R as I,o as d,c as f,g as Q,Q as w,i as k,y as D}from"./index-DfALJeeI.js";import"./index-D5fw03LZ.js";import"./request-CZtBzr0V.js";const T={class:"course-analysis-container"},U={class:"card-header"},$={__name:"CourseAnalysis",setup(j){const c=r(7),u=r(!1),v=r([]),y=r([]),p=r({xAxisData:[],series:[]});H(()=>{g(),N()});const g=async()=>{u.value=!0;try{const l=await R({days:c.value,limit:10});l.code===200&&l.data&&l.data.length>0&&(p.value={xAxisData:l.data.map(a=>a.courseName),series:[{name:"热度分数",data:l.data.map(a=>a.popularityScore||0)}]})}catch{M.error("获取课程排行榜失败")}finally{u.value=!1}},N=async()=>{try{const[l,a]=await Promise.all([B({limit:5}),E({limit:5})]);l.code===200&&(v.value=l.data||[]),a.code===200&&(y.value=a.data||[])}catch(l){console.error("获取热门/冷门课程失败:",l)}};return(l,a)=>{const _=o("el-option"),V=o("el-select"),m=o("el-card"),s=o("el-table-column"),x=o("el-tag"),C=o("el-table"),b=o("el-col"),S=o("el-row"),h=I("loading");return d(),P("div",T,[a[4]||(a[4]=i("h2",{class:"page-title"},"课程热度分析",-1)),e(m,null,{header:t(()=>[i("div",U,[a[1]||(a[1]=i("span",null,"课程热度排行榜",-1)),e(V,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=n=>c.value=n),onChange:g,size:"small",style:{width:"120px"}},{default:t(()=>[e(_,{label:"最近7天",value:7}),e(_,{label:"最近15天",value:15}),e(_,{label:"最近30天",value:30})]),_:1},8,["modelValue"])])]),default:t(()=>[p.value.xAxisData?(d(),f(A,{key:0,data:p.value,height:"400px","y-axis-name":"热度分数",horizontal:!0},null,8,["data"])):Q("",!0)]),_:1}),e(S,{gutter:20,class:"course-lists"},{default:t(()=>[e(b,{xs:24,sm:12},{default:t(()=>[e(m,null,{header:t(()=>[...a[2]||(a[2]=[i("span",null,"热门课程",-1)])]),default:t(()=>[w((d(),f(C,{data:v.value,stripe:""},{default:t(()=>[e(s,{prop:"courseName",label:"课程名称"}),e(s,{prop:"popularityScore",label:"热度",width:"100"},{default:t(({row:n})=>[e(x,{type:"success"},{default:t(()=>[k(D(n.popularityScore),1)]),_:2},1024)]),_:1}),e(s,{prop:"enrollCount",label:"报名数",width:"100"})]),_:1},8,["data"])),[[h,u.value]])]),_:1})]),_:1}),e(b,{xs:24,sm:12},{default:t(()=>[e(m,null,{header:t(()=>[...a[3]||(a[3]=[i("span",null,"冷门课程",-1)])]),default:t(()=>[w((d(),f(C,{data:y.value,stripe:""},{default:t(()=>[e(s,{prop:"courseName",label:"课程名称"}),e(s,{prop:"popularityScore",label:"热度",width:"100"},{default:t(({row:n})=>[e(x,{type:"warning"},{default:t(()=>[k(D(n.popularityScore),1)]),_:2},1024)]),_:1}),e(s,{prop:"enrollCount",label:"报名数",width:"100"})]),_:1},8,["data"])),[[h,u.value]])]),_:1})]),_:1})]),_:1})])}}},L=z($,[["__scopeId","data-v-d325d8c8"]]);export{L as default};
