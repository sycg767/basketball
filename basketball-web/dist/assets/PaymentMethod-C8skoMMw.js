import{_ as P,r as _,j as U,n as q,U as E,E as v,k as S,d as $,e as t,a as n,f as i,o as R,b as e,y as d,v as f,u as W,Y as j,i as N}from"./index-DfALJeeI.js";import{u as A}from"./user-6l3YhxiV.js";import"./user-D_OnkJXJ.js";import"./request-CZtBzr0V.js";const D={class:"payment-method-container"},F={class:"order-info"},O={class:"info-item"},Y={class:"value"},G={class:"info-item"},H={class:"value"},J={class:"info-item"},K={class:"value amount"},L={class:"payment-methods"},Q={class:"method-content"},X={class:"method-icon balance"},Z={class:"method-info"},ee={class:"payment-actions"},se={__name:"PaymentMethod",setup(ae){const g=E(),r=S(),k=A(),c=_(!1),o=_("wechat"),y=_("0.00"),a=U({orderNo:"",businessNo:"",businessName:"",businessType:"",amount:"0.00"});q(()=>{w(),C()});const w=()=>{const{orderNo:l,businessNo:s,businessName:b,businessType:u,amount:m}=g.query;if(!l||!m){v.error("订单信息不完整"),r.back();return}a.orderNo=l,a.businessNo=s||l,a.businessName=b||"篮球馆服务",a.businessType=u||"booking",a.amount=m},C=()=>{const l=k.userInfo.balance||0;y.value=l.toFixed(2)},T=()=>{if(!o.value){v.warning("请选择支付方式");return}switch(c.value=!0,o.value){case"wechat":x();break;case"alipay":z();break;case"balance":B();break;default:v.error("不支持的支付方式"),c.value=!1}},x=()=>{r.push({path:"/payment/wechat",query:{businessNo:a.businessNo,businessType:a.businessType,businessName:a.businessName,amount:a.amount}})},z=()=>{r.push({path:"/payment/alipay",query:{businessNo:a.businessNo,businessType:a.businessType,businessName:a.businessName,amount:a.amount}})},B=async()=>{v.info("余额支付功能开发中"),c.value=!1},V=()=>{r.back()};return(l,s)=>{const b=i("el-divider"),u=i("el-radio"),m=i("el-icon"),M=i("el-radio-group"),h=i("el-button"),I=i("el-card");return R(),$("div",D,[t(I,{class:"payment-card"},{default:n(()=>[e("div",F,[s[7]||(s[7]=e("h2",{class:"section-title"},"订单信息",-1)),e("div",O,[s[4]||(s[4]=e("span",{class:"label"},"订单编号:",-1)),e("span",Y,d(a.orderNo||"-"),1)]),e("div",G,[s[5]||(s[5]=e("span",{class:"label"},"商品名称:",-1)),e("span",H,d(a.businessName||"-"),1)]),e("div",J,[s[6]||(s[6]=e("span",{class:"label"},"订单金额:",-1)),e("span",K,"¥"+d(a.amount||"0.00"),1)])]),t(b),e("div",L,[s[11]||(s[11]=e("h2",{class:"section-title"},"选择支付方式",-1)),t(M,{modelValue:o.value,"onUpdate:modelValue":s[3]||(s[3]=p=>o.value=p),class:"method-group"},{default:n(()=>[e("div",{class:f(["method-item",{active:o.value==="wechat"}]),onClick:s[0]||(s[0]=p=>o.value="wechat")},[t(u,{value:"wechat",size:"large"},{default:n(()=>[...s[8]||(s[8]=[e("div",{class:"method-content"},[e("div",{class:"method-icon wechat"},[e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-wechat"})])]),e("div",{class:"method-info"},[e("h4",null,"微信支付"),e("p",null,"推荐使用微信扫码支付")])],-1)])]),_:1})],2),e("div",{class:f(["method-item",{active:o.value==="alipay"}]),onClick:s[1]||(s[1]=p=>o.value="alipay")},[t(u,{value:"alipay",size:"large"},{default:n(()=>[...s[9]||(s[9]=[e("div",{class:"method-content"},[e("div",{class:"method-icon alipay"},[e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-alipay"})])]),e("div",{class:"method-info"},[e("h4",null,"支付宝支付"),e("p",null,"支持支付宝扫码或跳转支付")])],-1)])]),_:1})],2),e("div",{class:f(["method-item",{active:o.value==="balance"}]),onClick:s[2]||(s[2]=p=>o.value="balance")},[t(u,{value:"balance",size:"large"},{default:n(()=>[e("div",Q,[e("div",X,[t(m,{size:32},{default:n(()=>[t(W(j))]),_:1})]),e("div",Z,[s[10]||(s[10]=e("h4",null,"余额支付",-1)),e("p",null,"当前余额: ¥"+d(y.value),1)])])]),_:1})],2)]),_:1},8,["modelValue"])]),e("div",ee,[t(h,{size:"large",onClick:V},{default:n(()=>[...s[12]||(s[12]=[N("取消",-1)])]),_:1}),t(h,{type:"primary",size:"large",loading:c.value,disabled:!o.value,onClick:T},{default:n(()=>[N(" 确认支付 ¥"+d(a.amount||"0.00"),1)]),_:1},8,["loading","disabled"])])]),_:1})])}}},ie=P(se,[["__scopeId","data-v-c47fbdb4"]]);export{ie as default};
