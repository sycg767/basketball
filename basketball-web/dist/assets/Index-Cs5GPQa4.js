import{_ as J,r as L,n as W,p as Z,c as T,o as u,a as e,b as t,e as s,g as Y,f,i as C,d as m,u as i,l as tt,q as ot,F as K,t as st,E as S,k as j,v as et,x as nt,y as N,z as w,A as D,s as F,B as it,C as P,D as q,G,H as U,I as X,J as H,K as lt}from"./index-Do8XCnNk.js";import{u as at}from"./user-lsBCkmcr.js";import{g as rt,m as dt,a as ct,b as ut}from"./notification-cMzTHiDR.js";import"./user-Dg266Ky_.js";import"./request-fDvtbK_n.js";const _t={class:"notification-trigger"},ft={class:"notification-popover"},pt={class:"notification-header"},vt={class:"notification-list"},gt={key:0,class:"notification-loading"},Ct=["onClick"],mt={class:"notification-icon"},Et={class:"notification-content"},ht={class:"notification-title"},yt={class:"notification-body"},St={class:"notification-time"},Rt={key:0,class:"notification-badge"},kt={class:"notification-footer"},Nt={__name:"NotificationCenter",setup(Q){const d=j(),a=L([]),p=L(0),R=L(!1);let E=null;W(()=>{O(),x()}),Z(()=>{v()});const O=async()=>{try{const n=await rt();n.code===200&&(p.value=n.data||0)}catch(n){console.error("获取未读数量失败:",n)}},$=async()=>{R.value=!0;try{const n=await ut({page:1,size:10});n.code===200&&(a.value=n.data.records||[])}catch(n){console.error("获取通知列表失败:",n),S.error("获取通知列表失败")}finally{R.value=!1}},A=()=>{$()},M=async n=>{if(n.isRead===0)try{await ct(n.id),n.isRead=1,p.value=Math.max(0,p.value-1)}catch(r){console.error("标记已读失败:",r)}d.push(`/notification/${n.id}`)},b=async()=>{try{await dt(),a.value.forEach(n=>{n.isRead=1}),p.value=0,S.success("已全部标记为已读")}catch(n){console.error("全部已读失败:",n),S.error("操作失败")}},I=()=>{d.push("/notification/list")},z=n=>({BOOKING_SUCCESS:F,BOOKING_CANCEL:D,COURSE_ENROLL_SUCCESS:F,COURSE_ENROLL_CANCEL:D,PAYMENT_SUCCESS:F,REFUND_SUCCESS:w,MEMBER_CARD_EXPIRE_SOON:D,COURSE_START_REMINDER:w,BOOKING_START_REMINDER:w})[n]||it,o=n=>({BOOKING_SUCCESS:"#67C23A",BOOKING_CANCEL:"#E6A23C",COURSE_ENROLL_SUCCESS:"#67C23A",COURSE_ENROLL_CANCEL:"#E6A23C",PAYMENT_SUCCESS:"#67C23A",REFUND_SUCCESS:"#409EFF",MEMBER_CARD_EXPIRE_SOON:"#E6A23C",COURSE_START_REMINDER:"#409EFF",BOOKING_START_REMINDER:"#409EFF"})[n]||"#909399",l=n=>{if(!n)return"";const r=new Date,g=new Date(n),_=r-g,h=60*1e3,y=60*h,k=24*y;if(_<h)return"刚刚";if(_<y)return`${Math.floor(_/h)}分钟前`;if(_<k)return`${Math.floor(_/y)}小时前`;if(_<7*k)return`${Math.floor(_/k)}天前`;{const B=g.getFullYear(),c=String(g.getMonth()+1).padStart(2,"0"),V=String(g.getDate()).padStart(2,"0");return`${B}-${c}-${V}`}},x=()=>{E=setInterval(()=>{O()},3e4)},v=()=>{E&&(clearInterval(E),E=null)};return(n,r)=>{const g=f("el-icon"),_=f("el-badge"),h=f("el-button"),y=f("el-divider"),k=f("el-empty"),B=f("el-popover");return u(),T(B,{placement:"bottom-end",width:380,trigger:"click",onShow:A},{reference:e(()=>[t("div",_t,[s(_,{value:p.value,hidden:p.value===0},{default:e(()=>[s(g,{size:24},{default:e(()=>[s(i(st))]),_:1})]),_:1},8,["value","hidden"])])]),default:e(()=>[t("div",ft,[t("div",pt,[r[1]||(r[1]=t("h4",null,"通知消息",-1)),a.value.length>0?(u(),T(h,{key:0,type:"text",size:"small",onClick:b},{default:e(()=>[...r[0]||(r[0]=[C(" 全部已读 ",-1)])]),_:1})):Y("",!0)]),s(y,{style:{margin:"8px 0"}}),t("div",vt,[R.value?(u(),m("div",gt,[s(g,{class:"is-loading"},{default:e(()=>[s(i(tt))]),_:1}),r[2]||(r[2]=t("p",null,"加载中...",-1))])):a.value.length===0?(u(),T(k,{key:1,description:"暂无通知","image-size":80})):(u(!0),m(K,{key:2},ot(a.value,c=>(u(),m("div",{key:c.id,class:et(["notification-item",{"is-unread":c.isRead===0}]),onClick:V=>M(c)},[t("div",mt,[s(g,{size:20,color:o(c.type)},{default:e(()=>[(u(),T(nt(z(c.type))))]),_:2},1032,["color"])]),t("div",Et,[t("div",ht,N(c.title),1),t("div",yt,N(c.content),1),t("div",St,N(l(c.sendTime)),1)]),c.isRead===0?(u(),m("div",Rt)):Y("",!0)],10,Ct))),128))]),s(y,{style:{margin:"8px 0"}}),t("div",kt,[s(h,{type:"text",onClick:I},{default:e(()=>[...r[3]||(r[3]=[C("查看全部",-1)])]),_:1})])])]),_:1})}}},Ot=J(Nt,[["__scopeId","data-v-673595d4"]]),At={class:"home-container"},Mt={class:"home-header"},Tt={class:"header-content"},Ut={class:"logo-section"},$t={class:"user-info"},bt={class:"username"},It={class:"home-content"},zt={class:"hero-section"},xt={class:"hero-content"},Bt={class:"hero-actions"},Lt={class:"features"},wt={class:"feature-tag"},Dt={class:"feature-tag"},Ft={class:"feature-tag"},Pt={class:"feature-tag"},Gt={class:"hero-image"},Kt={class:"image-placeholder"},Vt={class:"quick-actions"},Yt={class:"actions-grid"},qt={class:"action-icon blue"},Xt={class:"action-icon green"},Ht={class:"action-icon orange"},Jt={class:"action-icon red"},jt={class:"intro-section"},Qt={class:"intro-grid"},Wt={class:"intro-item"},Zt={class:"intro-icon blue"},to={class:"intro-item"},oo={class:"intro-icon green"},so={class:"intro-item"},eo={class:"intro-icon orange"},no={class:"intro-item"},io={class:"intro-icon red"},lo={__name:"Index",setup(Q){const d=j(),a=at(),p=()=>(a.realName||a.username||"用户").charAt(0).toUpperCase(),R=()=>{d.push("/login")},E=()=>{d.push("/register")},O=()=>{d.push("/profile")},$=()=>{lt.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{a.logout(),S.success("已退出登录"),d.push("/login")}).catch(()=>{})},A=()=>{d.push("/venue")},M=()=>{if(!a.isLogin){S.warning("请先登录"),d.push("/login");return}d.push("/booking")},b=()=>{d.push("/course")},I=()=>{if(!a.isLogin){S.warning("请先登录"),d.push("/login");return}d.push("/member/card")};return(z,o)=>{const l=f("el-icon"),x=f("el-avatar"),v=f("el-button");return u(),m("div",At,[t("div",Mt,[t("div",Tt,[t("div",Ut,[s(l,{size:32,color:"#ffffff"},{default:e(()=>[s(i(P))]),_:1}),o[0]||(o[0]=t("h1",null,"篮球场馆预约",-1))]),t("div",$t,[i(a).isLogin?(u(),m(K,{key:0},[s(Ot),s(x,{size:36,style:{"margin-right":"10px"}},{default:e(()=>[C(N(p()),1)]),_:1}),t("span",bt,N(i(a).realName||i(a).username||"用户"),1),s(v,{type:"primary",link:"",onClick:O},{default:e(()=>[...o[1]||(o[1]=[C("个人中心",-1)])]),_:1}),s(v,{type:"danger",link:"",onClick:$},{default:e(()=>[...o[2]||(o[2]=[C("退出",-1)])]),_:1})],64)):(u(),m(K,{key:1},[s(v,{type:"primary",plain:"",onClick:R},{default:e(()=>[...o[3]||(o[3]=[C("登录",-1)])]),_:1}),s(v,{type:"primary",onClick:E},{default:e(()=>[...o[4]||(o[4]=[C("注册",-1)])]),_:1})],64))])])]),t("div",It,[t("div",zt,[t("div",xt,[o[11]||(o[11]=t("h2",{class:"hero-title"},"欢迎来到篮球场馆预约系统",-1)),o[12]||(o[12]=t("p",{class:"hero-subtitle"},"在这里轻松预订心仪的篮球场地，享受专业的运动体验",-1)),t("div",Bt,[s(v,{type:"primary",size:"large",onClick:A},{default:e(()=>[s(l,null,{default:e(()=>[s(i(q))]),_:1}),o[5]||(o[5]=t("span",null,"浏览场地",-1))]),_:1}),s(v,{type:"success",size:"large",plain:"",onClick:M},{default:e(()=>[s(l,null,{default:e(()=>[s(i(G))]),_:1}),o[6]||(o[6]=t("span",null,"我的预订",-1))]),_:1})]),t("div",Lt,[t("div",wt,[s(l,{color:"#409eff"},{default:e(()=>[s(i(U))]),_:1}),o[7]||(o[7]=t("span",null,"在线预订",-1))]),t("div",Dt,[s(l,{color:"#67c23a"},{default:e(()=>[s(i(U))]),_:1}),o[8]||(o[8]=t("span",null,"专业场地",-1))]),t("div",Ft,[s(l,{color:"#e6a23c"},{default:e(()=>[s(i(U))]),_:1}),o[9]||(o[9]=t("span",null,"优惠会员",-1))]),t("div",Pt,[s(l,{color:"#f56c6c"},{default:e(()=>[s(i(U))]),_:1}),o[10]||(o[10]=t("span",null,"便捷支付",-1))])])]),t("div",Gt,[t("div",Kt,[s(l,{size:120,color:"#409eff"},{default:e(()=>[s(i(P))]),_:1})])])]),t("div",Vt,[o[21]||(o[21]=t("h3",{class:"section-title"},"快捷功能",-1)),t("div",Yt,[t("div",{class:"action-card",onClick:A},[t("div",qt,[s(l,{size:40},{default:e(()=>[s(i(q))]),_:1})]),o[13]||(o[13]=t("h4",null,"浏览场地",-1)),o[14]||(o[14]=t("p",null,"查看所有可用的篮球场地",-1))]),t("div",{class:"action-card",onClick:M},[t("div",Xt,[s(l,{size:40},{default:e(()=>[s(i(G))]),_:1})]),o[15]||(o[15]=t("h4",null,"我的预订",-1)),o[16]||(o[16]=t("p",null,"查看和管理您的场地预订",-1))]),t("div",{class:"action-card",onClick:b},[t("div",Ht,[s(l,{size:40},{default:e(()=>[s(i(X))]),_:1})]),o[17]||(o[17]=t("h4",null,"课程报名",-1)),o[18]||(o[18]=t("p",null,"参加专业的篮球培训课程",-1))]),t("div",{class:"action-card",onClick:I},[t("div",Jt,[s(l,{size:40},{default:e(()=>[s(i(H))]),_:1})]),o[19]||(o[19]=t("h4",null,"会员中心",-1)),o[20]||(o[20]=t("p",null,"查看会员权益和积分",-1))])])]),t("div",jt,[o[30]||(o[30]=t("h3",{class:"section-title"},"系统功能介绍",-1)),t("div",Qt,[t("div",Wt,[t("div",Zt,[s(l,{size:32},{default:e(()=>[s(i(P))]),_:1})]),o[22]||(o[22]=t("h4",null,"场地预订",-1)),o[23]||(o[23]=t("p",null,"支持多种场地类型，实时查看场地状态，方便快捷的预订流程",-1))]),t("div",to,[t("div",oo,[s(l,{size:32},{default:e(()=>[s(i(G))]),_:1})]),o[24]||(o[24]=t("h4",null,"灵活时段",-1)),o[25]||(o[25]=t("p",null,"灵活的预订时段选择，支持在线支付，预订记录随时查询",-1))]),t("div",so,[t("div",eo,[s(l,{size:32},{default:e(()=>[s(i(X))]),_:1})]),o[26]||(o[26]=t("h4",null,"课程培训",-1)),o[27]||(o[27]=t("p",null,"专业教练团队，多样化课程选择，线上报名便捷高效",-1))]),t("div",no,[t("div",io,[s(l,{size:32},{default:e(()=>[s(i(H))]),_:1})]),o[28]||(o[28]=t("h4",null,"会员体系",-1)),o[29]||(o[29]=t("p",null,"会员等级制度，积分奖励机制，专属优惠折扣",-1))])])])])])}}},fo=J(lo,[["__scopeId","data-v-9dc67f10"]]);export{fo as default};
