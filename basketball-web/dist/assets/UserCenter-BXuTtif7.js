import{_ as j,j as q,r as f,t as F,E as p,d as g,b as s,e,a as o,f as y,B as l,u as a,g as T,m as H,o as h,n as K,i as d,N as O,H as Q,O as u,K as B,L as N,P as G,Q as J,R as M,y as W,M as X}from"./index-DU9PCbH8.js";import{g as Y,a as Z,b as $}from"./member-D45oi1Qc.js";import{A as ss}from"./AnnouncementSection-BZuGmO6K.js";import"./request-KjaGbLG7.js";const ts={class:"user-center-container"},es={class:"user-header"},os={class:"header-content"},as={class:"logo-section"},ns={class:"user-info"},is={class:"username"},ls={class:"user-content"},cs={class:"user-info-card"},ds={class:"card-content"},rs={class:"user-avatar"},us={class:"user-details"},_s={class:"user-meta"},vs={key:0,class:"member-level"},ms={class:"user-id"},fs={key:0,class:"member-benefits"},ps={class:"account-panel"},ys={class:"account-item"},gs={class:"account-value"},hs={class:"account-item"},bs={class:"account-value"},ks={class:"account-item"},Cs={class:"account-value"},zs={class:"quick-actions"},ws={class:"actions-grid"},xs={class:"action-icon blue"},Ts={class:"action-icon green"},Bs={class:"action-icon orange"},Ns={class:"action-icon purple"},Ms={class:"action-icon gold"},Ds={class:"action-icon red"},Ls={class:"action-icon cyan"},Ps={class:"announcement-section"},Us={class:"recent-activities"},Es={class:"activity-list"},Rs={class:"activity-item"},Ss={class:"activity-icon blue"},Vs={class:"activity-status"},Is={class:"activity-item"},As={class:"activity-icon orange"},js={class:"activity-status"},qs={class:"activity-item"},Fs={class:"activity-icon green"},Hs={class:"activity-status"},Ks={__name:"UserCenter",setup(Os){const c=H(),i=q(),b=f(0),k=f(0),C=f(""),z=f([]);F(async()=>{await w()});const w=async()=>{var _;try{const[t,n,v]=await Promise.all([Y(),Z(),$({current:1,size:10})]);if(t.code===200&&(b.value=t.data||0),n.code===200&&(k.value=n.data||0),v.code===200){z.value=((_=v.data)==null?void 0:_.records)||[];const r=z.value.find(m=>m.status===1);r&&r.expireTime&&(C.value=new Date(r.expireTime).toLocaleDateString("zh-CN"))}}catch(t){console.error("获取用户数据失败:",t),p.error("获取用户数据失败")}},D=async()=>{p.info("正在刷新数据..."),await w(),p.success("数据已更新")},L=async()=>{try{await X.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),i.logout(),c.push("/login"),p.success("已退出登录")}catch{}},x=()=>(i.realName||i.username||"用户").charAt(0).toUpperCase(),P=()=>({1:"银卡会员",2:"金卡会员",3:"钻石会员"})[i.memberLevel]||"普通会员",U=()=>{c.push("/venue")},E=()=>{c.push("/booking")},R=()=>{c.push("/course")},S=()=>{c.push("/member/card")},V=()=>{c.push("/member/points")},I=()=>{c.push("/payment/method")},A=()=>{c.push("/notification/list")};return(_,t)=>{const n=y("el-icon"),v=y("el-avatar"),r=y("el-button"),m=y("el-tag");return h(),g("div",ts,[s("div",es,[s("div",os,[s("div",as,[e(n,{size:28,color:"#ffffff"},{default:o(()=>[e(a(K))]),_:1}),t[0]||(t[0]=s("h1",null,"用户中心",-1))]),s("div",ns,[e(v,{size:32,style:{"margin-right":"12px"}},{default:o(()=>[d(l(x()),1)]),_:1}),s("span",is,l(a(i).realName||a(i).username||"用户"),1),e(r,{type:"primary",link:"",onClick:_.goProfile},{default:o(()=>[...t[1]||(t[1]=[d("个人中心",-1)])]),_:1},8,["onClick"]),e(r,{type:"info",link:"",onClick:D},{default:o(()=>[e(n,{size:14},{default:o(()=>[e(a(O))]),_:1}),t[2]||(t[2]=d(" 刷新 ",-1))]),_:1}),e(r,{type:"danger",link:"",onClick:L},{default:o(()=>[...t[3]||(t[3]=[d("退出",-1)])]),_:1})])])]),s("div",ls,[s("div",cs,[s("div",ds,[s("div",rs,[e(v,{size:80},{default:o(()=>[d(l(x()),1)]),_:1})]),s("div",us,[s("h2",null,l(a(i).realName||a(i).username||"用户"),1),s("div",_s,[a(i).memberLevel>0?(h(),g("span",vs,l(P()),1)):T("",!0),s("span",ms,"ID: "+l(a(i).userId),1)]),a(i).memberLevel>0?(h(),g("div",fs,[...t[4]||(t[4]=[s("p",null,"✨ 会员专享权益：场地预订折扣、优先选场、积分加倍",-1)])])):T("",!0)])]),s("div",ps,[s("div",ys,[t[5]||(t[5]=s("div",{class:"account-label"},"积分余额",-1)),s("div",gs,l(b.value),1)]),s("div",hs,[t[6]||(t[6]=s("div",{class:"account-label"},"账户余额",-1)),s("div",bs,"¥"+l(k.value.toFixed(2)),1)]),s("div",ks,[t[7]||(t[7]=s("div",{class:"account-label"},"会员到期",-1)),s("div",Cs,l(C.value||"永久有效"),1)])])]),s("div",zs,[t[15]||(t[15]=s("h3",{class:"section-title"},"快捷功能",-1)),s("div",ws,[s("div",{class:"action-card",onClick:U},[s("div",xs,[e(n,{size:32},{default:o(()=>[e(a(Q))]),_:1})]),t[8]||(t[8]=s("div",{class:"action-content"},[s("h4",null,"场地预订"),s("p",null,"查看和预订篮球场地")],-1)),e(n,{class:"arrow-icon"},{default:o(()=>[e(a(u))]),_:1})]),s("div",{class:"action-card",onClick:E},[s("div",Ts,[e(n,{size:32},{default:o(()=>[e(a(B))]),_:1})]),t[9]||(t[9]=s("div",{class:"action-content"},[s("h4",null,"我的预订"),s("p",null,"查看预订记录和状态")],-1)),e(n,{class:"arrow-icon"},{default:o(()=>[e(a(u))]),_:1})]),s("div",{class:"action-card",onClick:R},[s("div",Bs,[e(n,{size:32},{default:o(()=>[e(a(N))]),_:1})]),t[10]||(t[10]=s("div",{class:"action-content"},[s("h4",null,"课程报名"),s("p",null,"查看和报名篮球课程")],-1)),e(n,{class:"arrow-icon"},{default:o(()=>[e(a(u))]),_:1})]),s("div",{class:"action-card",onClick:S},[s("div",Ns,[e(n,{size:32},{default:o(()=>[e(a(G))]),_:1})]),t[11]||(t[11]=s("div",{class:"action-content"},[s("h4",null,"会员中心"),s("p",null,"查看会员卡和权益")],-1)),e(n,{class:"arrow-icon"},{default:o(()=>[e(a(u))]),_:1})]),s("div",{class:"action-card",onClick:V},[s("div",Ms,[e(n,{size:32},{default:o(()=>[e(a(J))]),_:1})]),t[12]||(t[12]=s("div",{class:"action-content"},[s("h4",null,"我的积分"),s("p",null,"查看积分余额和明细")],-1)),e(n,{class:"arrow-icon"},{default:o(()=>[e(a(u))]),_:1})]),s("div",{class:"action-card",onClick:I},[s("div",Ds,[e(n,{size:32},{default:o(()=>[e(a(M))]),_:1})]),t[13]||(t[13]=s("div",{class:"action-content"},[s("h4",null,"支付管理"),s("p",null,"管理支付方式和账单")],-1)),e(n,{class:"arrow-icon"},{default:o(()=>[e(a(u))]),_:1})]),s("div",{class:"action-card",onClick:A},[s("div",Ls,[e(n,{size:32},{default:o(()=>[e(a(W))]),_:1})]),t[14]||(t[14]=s("div",{class:"action-content"},[s("h4",null,"通知中心"),s("p",null,"查看系统通知和消息")],-1)),e(n,{class:"arrow-icon"},{default:o(()=>[e(a(u))]),_:1})])])]),s("div",Ps,[e(ss)]),s("div",Us,[t[22]||(t[22]=s("h3",{class:"section-title"},"最近活动",-1)),s("div",Es,[s("div",Rs,[s("div",Ss,[e(n,null,{default:o(()=>[e(a(B))]),_:1})]),t[17]||(t[17]=s("div",{class:"activity-content"},[s("h4",null,"场地预订"),s("p",{class:"activity-time"},"2小时前")],-1)),s("div",Vs,[e(m,{type:"success",size:"small"},{default:o(()=>[...t[16]||(t[16]=[d("已确认",-1)])]),_:1})])]),s("div",Is,[s("div",As,[e(n,null,{default:o(()=>[e(a(N))]),_:1})]),t[19]||(t[19]=s("div",{class:"activity-content"},[s("h4",null,"课程报名"),s("p",{class:"activity-time"},"1天前")],-1)),s("div",js,[e(m,{type:"primary",size:"small"},{default:o(()=>[...t[18]||(t[18]=[d("进行中",-1)])]),_:1})])]),s("div",qs,[s("div",Fs,[e(n,null,{default:o(()=>[e(a(M))]),_:1})]),t[21]||(t[21]=s("div",{class:"activity-content"},[s("h4",null,"积分兑换"),s("p",{class:"activity-time"},"3天前")],-1)),s("div",Hs,[e(m,{type:"info",size:"small"},{default:o(()=>[...t[20]||(t[20]=[d("已完成",-1)])]),_:1})])])])])])])}}},Xs=j(Ks,[["__scopeId","data-v-34c6f1c2"]]);export{Xs as default};
