import{_ as E,r as p,k as F,t as I,d as h,e as t,a as o,f as l,m as M,o as b,b as a,B as u,F as S,x as W,i as _,u as k,ak as A,a8 as D,E as L}from"./index-zUzrFZpX.js";import{a as $,h as j}from"./member-DdAKiQtd.js";import{B as G}from"./BackButton-BCA-o-ra.js";const H={class:"balance-recharge-container"},J={class:"current-balance"},K={class:"balance-amount"},O={class:"quick-amounts"},P={class:"payment-option"},Q={class:"payment-icon wechat"},X={class:"payment-option"},Y={class:"payment-icon alipay"},Z={class:"action-buttons"},ee={__name:"BalanceRecharge",setup(ae){const i=M(),c=p(null),d=p(!1),y=p(0),w=[50,100,200,500],n=F({amount:null,paymentType:"wechat_native",clientIp:""}),B={amount:[{required:!0,message:"请选择或输入充值金额",trigger:"blur"},{type:"number",min:1,message:"充值金额必须大于0",trigger:"blur"}],paymentType:[{required:!0,message:"请选择支付方式",trigger:"change"}]},T=async()=>{try{const s=await $();s.code===200&&(y.value=s.data)}catch(s){console.error("获取余额失败:",s)}},C=async()=>{if(c.value)try{await c.value.validate(),d.value=!0;const s=await j({amount:n.amount,paymentType:n.paymentType,clientIp:"127.0.0.1"});if(s.code===200){const e=s.data;n.paymentType.startsWith("wechat")?i.push({path:"/payment/wechat",query:{paymentNo:e.paymentNo,qrCodeUrl:e.qrCodeUrl,amount:n.amount,businessType:"balance_recharge"}}):n.paymentType.startsWith("alipay")&&i.push({path:"/payment/alipay",query:{paymentNo:e.paymentNo,qrCodeUrl:e.qrCodeUrl,amount:n.amount,businessType:"balance_recharge"}})}}catch(s){s.message&&L.error(s.message)}finally{d.value=!1}},q=()=>{i.back()};return I(()=>{T()}),(s,e)=>{const x=l("el-divider"),m=l("el-button"),V=l("el-input-number"),f=l("el-form-item"),g=l("el-icon"),v=l("el-radio"),N=l("el-radio-group"),U=l("el-alert"),R=l("el-form"),z=l("el-card");return b(),h("div",H,[t(G,{text:"返回"}),t(z,{class:"recharge-card"},{header:o(()=>[...e[2]||(e[2]=[a("div",{class:"card-header"},[a("h2",null,"账户余额充值")],-1)])]),default:o(()=>[a("div",J,[e[3]||(e[3]=a("div",{class:"balance-label"},"当前余额",-1)),a("div",K,"¥"+u(y.value),1)]),t(x),t(R,{model:n,rules:B,ref_key:"formRef",ref:c,"label-width":"100px"},{default:o(()=>[t(f,{label:"充值金额",prop:"amount"},{default:o(()=>[a("div",O,[(b(),h(S,null,W(w,r=>t(m,{key:r,type:n.amount===r?"primary":"",onClick:te=>n.amount=r,class:"amount-btn"},{default:o(()=>[_(" ¥"+u(r),1)]),_:2},1032,["type","onClick"])),64))]),t(V,{modelValue:n.amount,"onUpdate:modelValue":e[0]||(e[0]=r=>n.amount=r),min:1,max:1e4,precision:2,"controls-position":"right",placeholder:"或输入自定义金额",style:{width:"100%","margin-top":"12px"}},null,8,["modelValue"])]),_:1}),t(f,{label:"支付方式",prop:"paymentType"},{default:o(()=>[t(N,{modelValue:n.paymentType,"onUpdate:modelValue":e[1]||(e[1]=r=>n.paymentType=r),class:"payment-methods"},{default:o(()=>[t(v,{value:"wechat_native",class:"payment-radio"},{default:o(()=>[a("div",P,[a("div",Q,[t(g,{size:24},{default:o(()=>[t(k(A))]),_:1})]),e[4]||(e[4]=a("div",{class:"payment-info"},[a("div",{class:"payment-name"},"微信支付"),a("div",{class:"payment-desc"},"扫码支付")],-1))])]),_:1}),t(v,{value:"alipay_page",class:"payment-radio"},{default:o(()=>[a("div",X,[a("div",Y,[t(g,{size:24},{default:o(()=>[t(k(D))]),_:1})]),e[5]||(e[5]=a("div",{class:"payment-info"},[a("div",{class:"payment-name"},"支付宝支付"),a("div",{class:"payment-desc"},"扫码支付")],-1))])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(U,{title:"充值说明",type:"info",closable:!1,"show-icon":""},{default:o(()=>[...e[6]||(e[6]=[a("ul",{class:"recharge-tips"},[a("li",null,"充值金额将实时到账"),a("li",null,"余额可用于支付预订订单"),a("li",null,"余额永久有效，不会过期")],-1)])]),_:1})]),_:1},8,["model"]),a("div",Z,[t(m,{size:"large",onClick:q},{default:o(()=>[...e[7]||(e[7]=[_("取消",-1)])]),_:1}),t(m,{type:"primary",size:"large",loading:d.value,onClick:C},{default:o(()=>[_(" 立即充值 ¥"+u(n.amount||0),1)]),_:1},8,["loading"])])]),_:1})])}}},le=E(ee,[["__scopeId","data-v-0878032d"]]);export{le as default};
