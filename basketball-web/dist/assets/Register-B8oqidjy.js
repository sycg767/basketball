import{_ as R,r as f,j as x,d as E,b as d,e as o,a,f as i,k as y,o as U,i as g,E as h}from"./index-Do8XCnNk.js";import{r as N}from"./user-Dg266Ky_.js";import{v as z,a as C,b}from"./validate-CbFD6edE.js";import"./request-fDvtbK_n.js";const B={class:"register-container"},L={class:"register-box"},k={class:"register-footer"},j={__name:"Register",setup(D){const p=y(),m=f(null),u=f(!1),s=x({username:"",password:"",confirmPassword:"",phone:"",realName:""}),w={username:[{validator:(t,e,r)=>{e?b(e)?r():r(new Error("用户名为3-20位字母、数字或下划线")):r(new Error("请输入用户名"))},trigger:"blur"}],password:[{validator:(t,e,r)=>{e?C(e)?r():r(new Error("密码长度为6-20位")):r(new Error("请输入密码"))},trigger:"blur"}],confirmPassword:[{validator:(t,e,r)=>{e?e!==s.password?r(new Error("两次输入的密码不一致")):r():r(new Error("请确认密码"))},trigger:"blur"}],phone:[{validator:(t,e,r)=>{e?z(e)?r():r(new Error("请输入正确的手机号")):r(new Error("请输入手机号"))},trigger:"blur"}]},_=()=>{m.value.validate(async t=>{if(t){u.value=!0;try{const{confirmPassword:e,...r}=s;await N(r),h.success("注册成功，请登录"),p.push("/login")}catch(e){console.error("注册失败",e)}finally{u.value=!1}}})},v=()=>{p.push("/login")};return(t,e)=>{const r=i("el-input"),n=i("el-form-item"),c=i("el-button"),V=i("el-link"),P=i("el-form");return U(),E("div",B,[d("div",L,[e[8]||(e[8]=d("h1",{class:"title"},"用户注册",-1)),o(P,{ref_key:"formRef",ref:m,model:s,rules:w,class:"register-form"},{default:a(()=>[o(n,{prop:"username"},{default:a(()=>[o(r,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=l=>s.username=l),placeholder:"用户名（3-20位字母数字下划线）",size:"large","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),o(n,{prop:"password"},{default:a(()=>[o(r,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=l=>s.password=l),type:"password",placeholder:"密码（6-20位）",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),o(n,{prop:"confirmPassword"},{default:a(()=>[o(r,{modelValue:s.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=l=>s.confirmPassword=l),type:"password",placeholder:"确认密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),o(n,{prop:"phone"},{default:a(()=>[o(r,{modelValue:s.phone,"onUpdate:modelValue":e[3]||(e[3]=l=>s.phone=l),placeholder:"手机号",size:"large","prefix-icon":"Phone",maxlength:"11"},null,8,["modelValue"])]),_:1}),o(n,{prop:"realName"},{default:a(()=>[o(r,{modelValue:s.realName,"onUpdate:modelValue":e[4]||(e[4]=l=>s.realName=l),placeholder:"真实姓名（选填）",size:"large","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),o(n,null,{default:a(()=>[o(c,{type:"primary",size:"large",loading:u.value,class:"register-btn",onClick:_},{default:a(()=>[...e[5]||(e[5]=[g(" 注册 ",-1)])]),_:1},8,["loading"])]),_:1}),d("div",k,[e[7]||(e[7]=d("span",null,"已有账号？",-1)),o(V,{type:"primary",onClick:v},{default:a(()=>[...e[6]||(e[6]=[g("立即登录",-1)])]),_:1})])]),_:1},8,["model"])])])}}},J=R(j,[["__scopeId","data-v-b9a36192"]]);export{J as default};
