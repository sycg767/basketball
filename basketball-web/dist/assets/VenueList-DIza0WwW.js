import{_ as S,m as q,a0 as N,f as o,c as h,o as d,a as l,b as s,e,i as y,v as p,d as k,g as C,u as V,a2 as G,a3 as O,y as A,n as H,F as $,N as D,k as J,r as F,t as K,a4 as Q,a5 as W,E as X,a6 as Y,G as Z}from"./index-DqRIPXSt.js";import{g as ee}from"./venue-DQeNl160.js";import{B as le}from"./BackButton-CB8aFD-N.js";const te={class:"venue-image"},ae=["src","alt"],ne={class:"venue-info"},se={class:"venue-header"},oe={class:"venue-name"},ue={class:"venue-code"},ie={class:"venue-details"},de={class:"detail-item"},ce={class:"detail-item"},re={class:"detail-item"},ve={class:"detail-item"},_e={key:0,class:"venue-facilities"},me={class:"venue-footer"},pe="https://via.placeholder.com/400x250?text=Basketball+Court",R=4,fe={__name:"VenueCard",props:{venue:{type:Object,required:!0},showBooking:{type:Boolean,default:!0}},emits:["booking"],setup(u,{emit:t}){const _=u,b=q(),x={1:"室内全场",2:"室内半场",3:"室外全场",4:"室外半场"},m=N(()=>_.venue.facilities?_.venue.facilities.split(",").filter(v=>v.trim()):[]),f=N(()=>m.value.slice(0,R)),T=N(()=>m.value.length>R),U=()=>{b.push(`/venue/${_.venue.id}`)},L=()=>{b.push(`/booking/create/${_.venue.id}`)};return(v,a)=>{const w=o("el-tag"),c=o("el-icon"),r=o("el-col"),n=o("el-row"),g=o("el-button"),z=o("el-card");return d(),h(z,{class:"venue-card","body-style":{padding:"0px"},shadow:"hover"},{default:l(()=>[s("div",te,[s("img",{src:u.venue.imageUrl||pe,alt:u.venue.venueName},null,8,ae),e(w,{class:"venue-status",type:u.venue.status===1?"success":"danger",size:"small"},{default:l(()=>[y(p(u.venue.status===1?"可用":"维护中"),1)]),_:1},8,["type"])]),s("div",ne,[s("div",se,[s("h3",oe,p(u.venue.venueName),1),s("span",ue,p(u.venue.venueCode),1)]),s("div",ie,[e(n,{gutter:10},{default:l(()=>[e(r,{span:12},{default:l(()=>[s("div",de,[e(c,null,{default:l(()=>[e(V(G))]),_:1}),s("span",null,p(u.venue.location||"未设置"),1)])]),_:1}),e(r,{span:12},{default:l(()=>[s("div",ce,[e(c,null,{default:l(()=>[e(V(O))]),_:1}),s("span",null,p(u.venue.area)+"㎡",1)])]),_:1})]),_:1}),e(n,{gutter:10},{default:l(()=>[e(r,{span:12},{default:l(()=>[s("div",re,[e(c,null,{default:l(()=>[e(V(A))]),_:1}),s("span",null,p(u.venue.capacity)+"人",1)])]),_:1}),e(r,{span:12},{default:l(()=>[s("div",ve,[e(c,null,{default:l(()=>[e(V(H))]),_:1}),s("span",null,p(x[u.venue.venueType]||u.venue.venueType),1)])]),_:1})]),_:1})]),u.venue.facilities?(d(),k("div",_e,[(d(!0),k($,null,D(f.value,B=>(d(),h(w,{key:B,size:"small",type:"info"},{default:l(()=>[y(p(B),1)]),_:2},1024))),128)),T.value?(d(),h(w,{key:0,size:"small",type:"info"},{default:l(()=>[y(" +"+p(m.value.length-R),1)]),_:1})):C("",!0)])):C("",!0),s("div",me,[e(g,{type:"primary",onClick:U},{default:l(()=>[...a[0]||(a[0]=[y(" 查看详情 ",-1)])]),_:1}),u.showBooking&&u.venue.status===1?(d(),h(g,{key:0,onClick:L},{default:l(()=>[...a[1]||(a[1]=[y(" 立即预订 ",-1)])]),_:1})):C("",!0)])])]),_:1})}}},ge=S(fe,[["__scopeId","data-v-86995922"]]),ye={class:"venue-list-container"},be={class:"venue-grid"},he={key:0,class:"pagination-container"},ke={__name:"VenueList",setup(u){const t=J({keyword:"",venueType:null,status:null,priceRange:null,facilities:[],page:1,size:6}),_=F(!1),b=F([]),x=F(0),m=async()=>{_.value=!0;try{const v={page:t.page,size:t.size};t.keyword&&(v.keyword=t.keyword),t.venueType&&(v.venueType=t.venueType.toString()),t.status!==null&&(v.status=t.status);const a=await ee(v);a.code===200&&(b.value=a.data.records||[],x.value=a.data.total||0)}catch(v){console.error("获取场地列表失败：",v),X.error("获取场地列表失败")}finally{_.value=!1}},f=()=>{t.page=1,m()},T=()=>{t.keyword="",t.venueType=null,t.status=null,t.priceRange=null,t.facilities=[],t.page=1,m()},U=()=>{t.page=1,m()},L=()=>{m()};return K(()=>{m()}),(v,a)=>{const w=o("el-input"),c=o("el-form-item"),r=o("el-col"),n=o("el-option"),g=o("el-select"),z=o("el-button"),B=o("el-row"),M=o("el-form"),E=o("el-card"),I=o("el-empty"),P=o("el-pagination"),j=W("loading");return d(),k("div",ye,[e(le,{text:"返回"}),a[9]||(a[9]=s("h2",{class:"page-title"},"场地列表",-1)),e(E,{class:"search-card",shadow:"never"},{default:l(()=>[e(M,{model:t,"label-width":"70px"},{default:l(()=>[e(B,{gutter:12},{default:l(()=>[e(r,{xs:24,sm:12,md:8,lg:6,xl:5},{default:l(()=>[e(c,{label:"关键词"},{default:l(()=>[e(w,{modelValue:t.keyword,"onUpdate:modelValue":a[0]||(a[0]=i=>t.keyword=i),placeholder:"场地名称/编码",clearable:"",onClear:f},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{xs:24,sm:12,md:8,lg:5,xl:4},{default:l(()=>[e(c,{label:"场地类型"},{default:l(()=>[e(g,{modelValue:t.venueType,"onUpdate:modelValue":a[1]||(a[1]=i=>t.venueType=i),placeholder:"请选择",clearable:"",onChange:f},{default:l(()=>[e(n,{label:"室内全场",value:1}),e(n,{label:"室内半场",value:2}),e(n,{label:"室外全场",value:3}),e(n,{label:"室外半场",value:4})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{xs:24,sm:12,md:8,lg:4,xl:4},{default:l(()=>[e(c,{label:"状态"},{default:l(()=>[e(g,{modelValue:t.status,"onUpdate:modelValue":a[2]||(a[2]=i=>t.status=i),placeholder:"请选择",clearable:"",onChange:f},{default:l(()=>[e(n,{label:"可用",value:1}),e(n,{label:"维护中",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{xs:24,sm:12,md:8,lg:5,xl:4},{default:l(()=>[e(c,{label:"价格范围"},{default:l(()=>[e(g,{modelValue:t.priceRange,"onUpdate:modelValue":a[3]||(a[3]=i=>t.priceRange=i),placeholder:"请选择",clearable:"",onChange:f},{default:l(()=>[e(n,{label:"0-50元",value:1}),e(n,{label:"50-100元",value:2}),e(n,{label:"100-200元",value:3}),e(n,{label:"200元以上",value:4})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{xs:24,sm:12,md:8,lg:5,xl:4},{default:l(()=>[e(c,{label:"设施"},{default:l(()=>[e(g,{modelValue:t.facilities,"onUpdate:modelValue":a[4]||(a[4]=i=>t.facilities=i),placeholder:"请选择",clearable:"",multiple:"","collapse-tags":"",onChange:f},{default:l(()=>[e(n,{label:"空调",value:1}),e(n,{label:"更衣室",value:2}),e(n,{label:"淋浴",value:3}),e(n,{label:"停车场",value:4}),e(n,{label:"餐饮",value:5})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{xs:24,sm:24,md:24,lg:24,xl:4},{default:l(()=>[e(c,{label:" ",class:"button-group"},{default:l(()=>[e(z,{type:"primary",icon:V(Y),onClick:f},{default:l(()=>[...a[7]||(a[7]=[y(" 搜索 ",-1)])]),_:1},8,["icon"]),e(z,{icon:V(Z),onClick:T},{default:l(()=>[...a[8]||(a[8]=[y(" 重置 ",-1)])]),_:1},8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),Q((d(),k("div",be,[b.value.length===0&&!_.value?(d(),h(I,{key:0,description:"暂无场地数据"})):C("",!0),(d(!0),k($,null,D(b.value,i=>(d(),h(ge,{key:i.id,venue:i,"show-booking":!0},null,8,["venue"]))),128))])),[[j,_.value]]),x.value>0?(d(),k("div",he,[e(P,{"current-page":t.page,"onUpdate:currentPage":a[5]||(a[5]=i=>t.page=i),"page-size":t.size,"onUpdate:pageSize":a[6]||(a[6]=i=>t.size=i),"page-sizes":[6,12,24,48],total:x.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:U,onCurrentChange:L},null,8,["current-page","page-size","total"])])):C("",!0)])}}},Ce=S(ke,[["__scopeId","data-v-c1f4acba"]]);export{Ce as default};
