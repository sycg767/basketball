import{_ as K,r as _,M as I,n as O,d as u,e as a,Q as M,a as n,f as r,R as W,g as p,F as C,c as g,U as X,E as N,k as Y,o as i,b as t,q as P,v as Z,y as o,i as d}from"./index-Do8XCnNk.js";import{a as ee,b as te}from"./venue-BjX1hId4.js";import"./request-fDvtbK_n.js";const se={class:"venue-detail-container"},le={class:"detail-content"},ae={class:"card-header"},ne={class:"venue-images"},oe={key:0,class:"thumbnail-list"},ie=["onClick"],re={class:"venue-info-detail"},ue={class:"venue-name"},ce={class:"venue-code"},de={class:"info-row"},ve={class:"info-row"},_e={class:"info-row"},pe={class:"info-row"},me={class:"info-row"},fe={key:0,class:"info-row"},ge={class:"facilities"},be={key:1,class:"info-row"},ye={class:"description"},he={class:"action-buttons"},ke={key:0,class:"price-list"},we={class:"price"},Ce={class:"member-price"},E="https://via.placeholder.com/600x400?text=Basketball+Court",Te={__name:"VenueDetail",setup(Ve){const R=X(),b=Y(),y=_(!1),h=_(!1),s=_(null),k=_([]),m=_(""),U={1:"室内全场",2:"室内半场",3:"室外全场",4:"室外半场"},F={1:"工作日",2:"周末",3:"节假日"},f=I(()=>s.value?s.value.imageList&&s.value.imageList.length>0?s.value.imageList:s.value.imageUrl?[s.value.imageUrl]:[E]:[E]),$=I(()=>!s.value||!s.value.facilities?[]:s.value.facilities.split(",").filter(c=>c.trim())),q=async()=>{const c=R.params.id;if(!c){N.error("场地ID不存在"),b.back();return}y.value=!0;try{const e=await ee(c);e.code===200&&(s.value=e.data,m.value=f.value[0],Q(c))}catch(e){console.error("获取场地详情失败：",e),N.error("获取场地详情失败")}finally{y.value=!1}},Q=async c=>{h.value=!0;try{const e=await te(c);e.code===200&&(k.value=e.data||[])}catch(e){console.error("获取价格信息失败：",e)}finally{h.value=!1}},T=()=>{b.back()},S=()=>{b.push(`/booking/create/${s.value.id}`)};return O(()=>{q()}),(c,e)=>{const j=r("el-page-header"),w=r("el-tag"),V=r("el-image"),D=r("el-col"),B=r("el-divider"),L=r("el-button"),A=r("el-row"),x=r("el-card"),v=r("el-table-column"),G=r("el-table"),H=r("el-empty"),z=W("loading");return i(),u("div",se,[a(j,{onBack:T,title:"返回"},{content:n(()=>[...e[0]||(e[0]=[t("span",{class:"page-title"},"场地详情",-1)])]),_:1}),M((i(),u("div",le,[s.value?(i(),u(C,{key:0},[a(x,{class:"info-card",shadow:"never"},{header:n(()=>[t("div",ae,[e[1]||(e[1]=t("span",null,"场地信息",-1)),a(w,{type:s.value.status===1?"success":"danger"},{default:n(()=>[d(o(s.value.status===1?"可用":"维护中"),1)]),_:1},8,["type"])])]),default:n(()=>[a(A,{gutter:20},{default:n(()=>[a(D,{span:12},{default:n(()=>[t("div",ne,[a(V,{src:m.value,"preview-src-list":f.value,fit:"cover",class:"main-image"},null,8,["src","preview-src-list"]),f.value.length>1?(i(),u("div",oe,[(i(!0),u(C,null,P(f.value,(l,J)=>(i(),u("div",{key:J,class:Z(["thumbnail-item",{active:m.value===l}]),onClick:De=>m.value=l},[a(V,{src:l,fit:"cover"},null,8,["src"])],10,ie))),128))])):p("",!0)])]),_:1}),a(D,{span:12},{default:n(()=>[t("div",re,[t("h2",ue,o(s.value.venueName),1),t("p",ce,"场地编码："+o(s.value.venueCode),1),a(B),t("div",de,[e[2]||(e[2]=t("label",null,"场地类型：",-1)),t("span",null,o(U[s.value.venueType]||s.value.venueType),1)]),t("div",ve,[e[3]||(e[3]=t("label",null,"场地位置：",-1)),t("span",null,o(s.value.location||"未设置"),1)]),t("div",_e,[e[4]||(e[4]=t("label",null,"场地面积：",-1)),t("span",null,o(s.value.area)+"㎡",1)]),t("div",pe,[e[5]||(e[5]=t("label",null,"可容纳人数：",-1)),t("span",null,o(s.value.capacity)+"人",1)]),t("div",me,[e[6]||(e[6]=t("label",null,"地面类型：",-1)),t("span",null,o(s.value.floorType||"未设置"),1)]),s.value.facilities?(i(),u("div",fe,[e[7]||(e[7]=t("label",null,"场地设施：",-1)),t("div",ge,[(i(!0),u(C,null,P($.value,l=>(i(),g(w,{key:l,size:"small",type:"info"},{default:n(()=>[d(o(l),1)]),_:2},1024))),128))])])):p("",!0),s.value.description?(i(),u("div",be,[e[8]||(e[8]=t("label",null,"场地描述：",-1)),t("p",ye,o(s.value.description),1)])):p("",!0),a(B),t("div",he,[s.value.status===1?(i(),g(L,{key:0,type:"primary",size:"large",onClick:S},{default:n(()=>[...e[9]||(e[9]=[d(" 立即预订 ",-1)])]),_:1})):p("",!0),a(L,{size:"large",onClick:T},{default:n(()=>[...e[10]||(e[10]=[d(" 返回列表 ",-1)])]),_:1})])])]),_:1})]),_:1})]),_:1}),M((i(),g(x,{class:"price-card",shadow:"never"},{header:n(()=>[...e[11]||(e[11]=[t("span",null,"价格信息",-1)])]),default:n(()=>[k.value.length>0?(i(),u("div",ke,[a(G,{data:k.value,border:"",stripe:""},{default:n(()=>[a(v,{label:"时段类型",width:"120"},{default:n(({row:l})=>[d(o(F[l.timeType]||l.timeType),1)]),_:1}),a(v,{prop:"timePeriod",label:"时段名称",width:"150"}),a(v,{label:"时间段",width:"200"},{default:n(({row:l})=>[d(o(l.startTime)+" - "+o(l.endTime),1)]),_:1}),a(v,{label:"标准价格",width:"120"},{default:n(({row:l})=>[t("span",we,"¥"+o(l.price)+"/小时",1)]),_:1}),a(v,{label:"会员价格",width:"120"},{default:n(({row:l})=>[t("span",Ce,"¥"+o(l.memberPrice)+"/小时",1)]),_:1}),a(v,{prop:"status",label:"状态",width:"100"},{default:n(({row:l})=>[a(w,{type:l.status===1?"success":"info",size:"small"},{default:n(()=>[d(o(l.status===1?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])])):(i(),g(H,{key:1,description:"暂无价格配置"}))]),_:1})),[[z,h.value]])],64)):p("",!0)])),[[z,y.value]])])}}},ze=K(Te,[["__scopeId","data-v-b0c21b0d"]]);export{ze as default};
