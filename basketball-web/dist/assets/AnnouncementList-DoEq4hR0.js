import{_ as j,r as u,t as q,E as b,d as p,e as a,a as s,f as c,m as H,a5 as I,o as i,b as o,a4 as R,g as Y,i as l,c as G,F as J,N as K,an as O,u as T,L as Q,v as g,V as W}from"./index-BU1z93KZ.js";import{r as X}from"./request-CITddpnx.js";import{B as Z}from"./BackButton-CN15_tN6.js";const ee={class:"announcement-list-container"},te={class:"filter-bar"},ne={class:"announcement-content"},ae=["onClick"],oe={class:"announcement-left"},se={class:"announcement-main"},le={class:"announcement-header-row"},re={class:"announcement-title"},ce={class:"announcement-time"},ue={class:"announcement-body"},ie={class:"announcement-meta"},de={class:"view-count"},pe={key:0,class:"pagination-container"},ge={__name:"AnnouncementList",setup(_e){H();const m=u([]),_=u(!1),d=u(1),y=u(10),h=u(0),C=u(""),z={1:{text:"系统通知",tag:"danger"},2:{text:"维护通知",tag:"warning"},3:{text:"节日通知",tag:"success"},4:{text:"活动通知",tag:"primary"}};q(()=>{f()});const f=async()=>{_.value=!0;try{const t=await X.get("/api/announcement/page",{params:{current:d.value,size:y.value,status:1,type:C.value||void 0}});t.code===200&&(m.value=t.data.records||[],h.value=t.data.total||0)}catch(t){console.error("获取公告列表失败:",t),b.error("获取公告列表失败")}finally{_.value=!1}},w=()=>{d.value=1,f()},M=()=>{f()},B=()=>{d.value=1,f()},V=t=>{b.info("公告详情功能开发中")},$=t=>{var e;return((e=z[t])==null?void 0:e.tag)||"info"},D=t=>{var e;return((e=z[t])==null?void 0:e.text)||"其他"},N=t=>({1:"#f56c6c",2:"#e6a23c",3:"#67c23a",4:"#409eff"})[t]||"#909399",A=t=>({1:"#fef0f0",2:"#fdf6ec",3:"#f0f9ff",4:"#ecf5ff"})[t]||"#f5f7fa",F=(t,e=100)=>t?t.length>e?t.substring(0,e)+"...":t:"",E=t=>{if(!t)return"";const e=new Date(t),r=e.getFullYear(),S=String(e.getMonth()+1).padStart(2,"0"),k=String(e.getDate()).padStart(2,"0"),v=String(e.getHours()).padStart(2,"0"),x=String(e.getMinutes()).padStart(2,"0");return`${r}-${S}-${k} ${v}:${x}`};return(t,e)=>{const r=c("el-radio-button"),S=c("el-radio-group"),k=c("el-empty"),v=c("el-icon"),x=c("el-tag"),L=c("el-pagination"),P=c("el-card"),U=I("loading");return i(),p("div",ee,[a(Z,{text:"返回"}),a(P,{class:"announcement-card"},{header:s(()=>[...e[3]||(e[3]=[o("div",{class:"card-header"},[o("h3",null,"系统公告")],-1)])]),default:s(()=>[o("div",te,[a(S,{modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=n=>C.value=n),onChange:w},{default:s(()=>[a(r,{value:""},{default:s(()=>[...e[4]||(e[4]=[l("全部",-1)])]),_:1}),a(r,{value:"1"},{default:s(()=>[...e[5]||(e[5]=[l("系统通知",-1)])]),_:1}),a(r,{value:"2"},{default:s(()=>[...e[6]||(e[6]=[l("维护通知",-1)])]),_:1}),a(r,{value:"3"},{default:s(()=>[...e[7]||(e[7]=[l("节日通知",-1)])]),_:1}),a(r,{value:"4"},{default:s(()=>[...e[8]||(e[8]=[l("活动通知",-1)])]),_:1})]),_:1},8,["modelValue"])]),R((i(),p("div",ne,[m.value.length===0&&!_.value?(i(),G(k,{key:0,description:"暂无公告"})):(i(!0),p(J,{key:1},K(m.value,n=>(i(),p("div",{key:n.id,class:"announcement-card-item",onClick:fe=>V(n)},[o("div",oe,[o("div",{class:"announcement-icon",style:O({backgroundColor:A(n.type)})},[a(v,{size:24,color:N(n.type)},{default:s(()=>[a(T(Q))]),_:1},8,["color"])],4)]),o("div",se,[o("div",le,[o("div",re,[l(g(n.title)+" ",1),a(x,{type:$(n.type),size:"small",effect:"plain"},{default:s(()=>[l(g(D(n.type)),1)]),_:2},1032,["type"])]),o("div",ce,g(E(n.publishTime)),1)]),o("div",ue,g(F(n.content)),1),o("div",ie,[o("span",de,[a(v,null,{default:s(()=>[a(T(W))]),_:1}),l(" "+g(n.viewCount||0)+" 阅读 ",1)])])])],8,ae))),128))])),[[U,_.value]]),h.value>0?(i(),p("div",pe,[a(L,{"current-page":d.value,"onUpdate:currentPage":e[1]||(e[1]=n=>d.value=n),"page-size":y.value,"onUpdate:pageSize":e[2]||(e[2]=n=>y.value=n),total:h.value,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:B,onCurrentChange:M},null,8,["current-page","page-size","total"])])):Y("",!0)]),_:1})])}}},he=j(ge,[["__scopeId","data-v-4e1193ab"]]);export{he as default};
