import{_ as R,m as S,$ as L,f as s,c as V,o as d,a as t,b as o,e,i as c,B as m,d as C,g as T,u as w,a1 as O,a2 as A,I as G,n as H,F as D,x as I,k as J,r as N,t as K,a3 as Q,a4 as W,E as X,a5 as Y,N as Z}from"./index-DU9PCbH8.js";import{g as ee}from"./venue-Br6zqmAS.js";const le={class:"venue-image"},te=["src","alt"],ae={class:"venue-info"},ne={class:"venue-header"},oe={class:"venue-name"},se={class:"venue-code"},ue={class:"venue-details"},ie={class:"detail-item"},de={class:"detail-item"},re={class:"detail-item"},ce={class:"detail-item"},ve={key:0,class:"venue-facilities"},pe={class:"venue-footer"},_e="https://via.placeholder.com/400x250?text=Basketball+Court",F=4,me={__name:"VenueCard",props:{venue:{type:Object,required:!0},showBooking:{type:Boolean,default:!0}},emits:["booking"],setup(u,{emit:a}){const v=u,b=S(),z={1:"室内全场",2:"室内半场",3:"室外全场",4:"室外半场"},p=L(()=>v.venue.facilities?v.venue.facilities.split(",").filter(r=>r.trim()):[]),f=L(()=>p.value.slice(0,F)),B=L(()=>p.value.length>F),U=()=>{b.push(`/venue/${v.venue.id}`)},$=()=>{b.push(`/booking/create/${v.venue.id}`)};return(r,l)=>{const g=s("el-tag"),y=s("el-icon"),h=s("el-col"),_=s("el-row"),n=s("el-button"),k=s("el-card");return d(),V(k,{class:"venue-card","body-style":{padding:"0px"},shadow:"hover"},{default:t(()=>[o("div",le,[o("img",{src:u.venue.imageUrl||_e,alt:u.venue.venueName},null,8,te),e(g,{class:"venue-status",type:u.venue.status===1?"success":"danger",size:"small"},{default:t(()=>[c(m(u.venue.status===1?"可用":"维护中"),1)]),_:1},8,["type"])]),o("div",ae,[o("div",ne,[o("h3",oe,m(u.venue.venueName),1),o("span",se,m(u.venue.venueCode),1)]),o("div",ue,[e(_,{gutter:10},{default:t(()=>[e(h,{span:12},{default:t(()=>[o("div",ie,[e(y,null,{default:t(()=>[e(w(O))]),_:1}),o("span",null,m(u.venue.location||"未设置"),1)])]),_:1}),e(h,{span:12},{default:t(()=>[o("div",de,[e(y,null,{default:t(()=>[e(w(A))]),_:1}),o("span",null,m(u.venue.area)+"㎡",1)])]),_:1})]),_:1}),e(_,{gutter:10},{default:t(()=>[e(h,{span:12},{default:t(()=>[o("div",re,[e(y,null,{default:t(()=>[e(w(G))]),_:1}),o("span",null,m(u.venue.capacity)+"人",1)])]),_:1}),e(h,{span:12},{default:t(()=>[o("div",ce,[e(y,null,{default:t(()=>[e(w(H))]),_:1}),o("span",null,m(z[u.venue.venueType]||u.venue.venueType),1)])]),_:1})]),_:1})]),u.venue.facilities?(d(),C("div",ve,[(d(!0),C(D,null,I(f.value,x=>(d(),V(g,{key:x,size:"small",type:"info"},{default:t(()=>[c(m(x),1)]),_:2},1024))),128)),B.value?(d(),V(g,{key:0,size:"small",type:"info"},{default:t(()=>[c(" +"+m(p.value.length-F),1)]),_:1})):T("",!0)])):T("",!0),o("div",pe,[e(n,{type:"primary",onClick:U},{default:t(()=>[...l[0]||(l[0]=[c(" 查看详情 ",-1)])]),_:1}),u.showBooking&&u.venue.status===1?(d(),V(n,{key:0,onClick:$},{default:t(()=>[...l[1]||(l[1]=[c(" 立即预订 ",-1)])]),_:1})):T("",!0)])])]),_:1})}}},fe=R(me,[["__scopeId","data-v-86995922"]]),ge={class:"venue-list-container"},be={class:"page-header"},ye={class:"venue-grid"},he={key:0,class:"pagination-container"},ke={__name:"VenueList",setup(u){S();const a=J({keyword:"",venueType:null,status:null,priceRange:null,facilities:[],page:1,size:6}),v=N(!1),b=N([]),z=N(0),p=async()=>{v.value=!0;try{const r={page:a.page,size:a.size};a.keyword&&(r.keyword=a.keyword),a.venueType&&(r.venueType=a.venueType.toString()),a.status!==null&&(r.status=a.status);const l=await ee(r);l.code===200&&(b.value=l.data.records||[],z.value=l.data.total||0)}catch(r){console.error("获取场地列表失败：",r),X.error("获取场地列表失败")}finally{v.value=!1}},f=()=>{a.page=1,p()},B=()=>{a.keyword="",a.venueType=null,a.status=null,a.priceRange=null,a.facilities=[],a.page=1,p()},U=()=>{a.page=1,p()},$=()=>{p()};return K(()=>{p()}),(r,l)=>{const g=s("el-breadcrumb-item"),y=s("el-breadcrumb"),h=s("el-input"),_=s("el-form-item"),n=s("el-option"),k=s("el-select"),x=s("el-button"),M=s("el-form"),E=s("el-card"),P=s("el-empty"),j=s("el-pagination"),q=W("loading");return d(),C("div",ge,[o("div",be,[l[10]||(l[10]=o("h2",null,"场地列表",-1)),e(y,{separator:"/"},{default:t(()=>[e(g,{to:{path:"/"}},{default:t(()=>[...l[7]||(l[7]=[c("首页",-1)])]),_:1}),e(g,null,{default:t(()=>[...l[8]||(l[8]=[c("场地管理",-1)])]),_:1}),e(g,null,{default:t(()=>[...l[9]||(l[9]=[c("场地列表",-1)])]),_:1})]),_:1})]),e(E,{class:"search-card",shadow:"never"},{default:t(()=>[e(M,{model:a,inline:!0},{default:t(()=>[e(_,{label:"关键词"},{default:t(()=>[e(h,{modelValue:a.keyword,"onUpdate:modelValue":l[0]||(l[0]=i=>a.keyword=i),placeholder:"场地名称/编码",clearable:"",onClear:f},null,8,["modelValue"])]),_:1}),e(_,{label:"场地类型"},{default:t(()=>[e(k,{modelValue:a.venueType,"onUpdate:modelValue":l[1]||(l[1]=i=>a.venueType=i),placeholder:"请选择",clearable:"",onChange:f},{default:t(()=>[e(n,{label:"室内全场",value:1}),e(n,{label:"室内半场",value:2}),e(n,{label:"室外全场",value:3}),e(n,{label:"室外半场",value:4})]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"状态"},{default:t(()=>[e(k,{modelValue:a.status,"onUpdate:modelValue":l[2]||(l[2]=i=>a.status=i),placeholder:"请选择",clearable:"",onChange:f},{default:t(()=>[e(n,{label:"可用",value:1}),e(n,{label:"维护中",value:0})]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"价格范围"},{default:t(()=>[e(k,{modelValue:a.priceRange,"onUpdate:modelValue":l[3]||(l[3]=i=>a.priceRange=i),placeholder:"请选择",clearable:"",onChange:f},{default:t(()=>[e(n,{label:"0-50元",value:1}),e(n,{label:"50-100元",value:2}),e(n,{label:"100-200元",value:3}),e(n,{label:"200元以上",value:4})]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"设施"},{default:t(()=>[e(k,{modelValue:a.facilities,"onUpdate:modelValue":l[4]||(l[4]=i=>a.facilities=i),placeholder:"请选择",clearable:"",multiple:"","collapse-tags":"",onChange:f},{default:t(()=>[e(n,{label:"空调",value:1}),e(n,{label:"更衣室",value:2}),e(n,{label:"淋浴",value:3}),e(n,{label:"停车场",value:4}),e(n,{label:"餐饮",value:5})]),_:1},8,["modelValue"])]),_:1}),e(_,null,{default:t(()=>[e(x,{type:"primary",icon:w(Y),onClick:f},{default:t(()=>[...l[11]||(l[11]=[c(" 搜索 ",-1)])]),_:1},8,["icon"]),e(x,{icon:w(Z),onClick:B},{default:t(()=>[...l[12]||(l[12]=[c(" 重置 ",-1)])]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),_:1}),Q((d(),C("div",ye,[b.value.length===0&&!v.value?(d(),V(P,{key:0,description:"暂无场地数据"})):T("",!0),(d(!0),C(D,null,I(b.value,i=>(d(),V(fe,{key:i.id,venue:i,"show-booking":!0},null,8,["venue"]))),128))])),[[q,v.value]]),z.value>0?(d(),C("div",he,[e(j,{"current-page":a.page,"onUpdate:currentPage":l[5]||(l[5]=i=>a.page=i),"page-size":a.size,"onUpdate:pageSize":l[6]||(l[6]=i=>a.size=i),"page-sizes":[6,12,24,48],total:z.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:U,onCurrentChange:$},null,8,["current-page","page-size","total"])])):T("",!0)])}}},we=R(ke,[["__scopeId","data-v-6a953b33"]]);export{we as default};
