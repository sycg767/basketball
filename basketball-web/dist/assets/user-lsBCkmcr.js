import{ag as t,ah as a,ai as n,aj as i,ak as u,al as s,am as o}from"./index-Do8XCnNk.js";import{g as f,l as m}from"./user-Dg266Ky_.js";const c=t("user",{state:()=>({token:n()||"",userInfo:a()||{},roles:[]}),getters:{userId:e=>e.userInfo.id,username:e=>e.userInfo.username,realName:e=>e.userInfo.realName,memberLevel:e=>e.userInfo.memberLevel||0,isLogin:e=>!!e.token},actions:{async login(e){try{const r=await m(e);return this.token=r.data.token,this.userInfo=r.data.userInfo,o(r.data.token),s(r.data.userInfo),Promise.resolve(r)}catch(r){return Promise.reject(r)}},setToken(e){this.token=e,o(e)},setUserInfo(e){this.userInfo=e,s(e)},async getUserInfo(){try{const e=await f();return this.userInfo=e.data,s(e.data),Promise.resolve(e)}catch(e){return Promise.reject(e)}},logout(){this.token="",this.userInfo={},this.roles=[],i(),u()}}});export{c as u};
