import{_ as W,j as X,r as v,a0 as M,t as Y,d as u,e as a,a4 as F,a5 as Z,g as _,F as w,a as o,f as c,c as g,a7 as ee,E as I,m as te,o as i,b as t,N,O as le,v as n,i as d}from"./index-DqRIPXSt.js";import{a as se,b as ae}from"./venue-DQeNl160.js";import{B as oe}from"./BackButton-CB8aFD-N.js";const z={0:{label:"普通用户",discount:1,color:"#909399"},1:{label:"银卡会员",discount:.95,color:"#C0C4CC"},2:{label:"金卡会员",discount:.9,color:"#F7BA2A"},3:{label:"铂金会员",discount:.85,color:"#409EFF"},4:{label:"VIP会员",discount:.8,color:"#E6A23C"}};function ne(C){return z[C]||z[0]}const ie={class:"venue-detail-container"},re={class:"detail-content"},ue={class:"card-header"},ce={class:"venue-images"},de={key:0,class:"thumbnail-list"},ve=["onClick"],_e={class:"venue-info-detail"},pe={class:"venue-name"},me={class:"venue-code"},fe={class:"info-row"},be={class:"info-row"},ge={class:"info-row"},ye={class:"info-row"},he={class:"info-row"},ke={key:0,class:"info-row"},we={class:"facilities"},Ce={key:1,class:"info-row"},Le={class:"description"},Be={class:"action-buttons"},Ve={key:0,class:"price-list"},Te={class:"price"},De={class:"member-price"},P="https://via.placeholder.com/600x400?text=Basketball+Court",Ee={__name:"VenueDetail",setup(C){const A=ee(),L=te(),R=X(),y=v(!1),h=v(!1),l=v(null),k=v([]),p=v(""),S={1:"室内全场",2:"室内半场",3:"室外全场",4:"室外半场"},U={1:"工作日",2:"周末",3:"节假日"},m=M(()=>l.value?l.value.imageList&&l.value.imageList.length>0?l.value.imageList:l.value.imageUrl?[l.value.imageUrl]:[P]:[P]),$=M(()=>!l.value||!l.value.facilities?[]:l.value.facilities.split(",").filter(r=>r.trim())),j=r=>{const e=R.memberLevel||0,f=ne(e).discount;return(r*f).toFixed(2)},O=async()=>{const r=A.params.id;if(!r){I.error("场地ID不存在"),L.back();return}y.value=!0;try{const e=await se(r);e.code===200&&(l.value=e.data,p.value=m.value[0],q(r))}catch(e){console.error("获取场地详情失败：",e),I.error("获取场地详情失败")}finally{y.value=!1}},q=async r=>{h.value=!0;try{const e=await ae(r);e.code===200&&(k.value=e.data||[])}catch(e){console.error("获取价格信息失败：",e)}finally{h.value=!1}},G=()=>{L.push(`/booking/create/${l.value.id}`)};return Y(()=>{O()}),(r,e)=>{const f=c("el-tag"),B=c("el-image"),V=c("el-col"),T=c("el-divider"),D=c("el-button"),H=c("el-row"),E=c("el-card"),b=c("el-table-column"),J=c("el-table"),K=c("el-empty"),x=Z("loading");return i(),u("div",ie,[a(oe,{text:"返回列表"}),F((i(),u("div",re,[l.value?(i(),u(w,{key:0},[a(E,{class:"info-card",shadow:"never"},{header:o(()=>[t("div",ue,[e[0]||(e[0]=t("span",null,"场地信息",-1)),a(f,{type:l.value.status===1?"success":"danger"},{default:o(()=>[d(n(l.value.status===1?"可用":"维护中"),1)]),_:1},8,["type"])])]),default:o(()=>[a(H,{gutter:20},{default:o(()=>[a(V,{span:12},{default:o(()=>[t("div",ce,[a(B,{src:p.value,"preview-src-list":m.value,fit:"cover",class:"main-image"},null,8,["src","preview-src-list"]),m.value.length>1?(i(),u("div",de,[(i(!0),u(w,null,N(m.value,(s,Q)=>(i(),u("div",{key:Q,class:le(["thumbnail-item",{active:p.value===s}]),onClick:xe=>p.value=s},[a(B,{src:s,fit:"cover"},null,8,["src"])],10,ve))),128))])):_("",!0)])]),_:1}),a(V,{span:12},{default:o(()=>[t("div",_e,[t("h2",pe,n(l.value.venueName),1),t("p",me,"场地编码："+n(l.value.venueCode),1),a(T),t("div",fe,[e[1]||(e[1]=t("label",null,"场地类型：",-1)),t("span",null,n(S[l.value.venueType]||l.value.venueType),1)]),t("div",be,[e[2]||(e[2]=t("label",null,"场地位置：",-1)),t("span",null,n(l.value.location||"未设置"),1)]),t("div",ge,[e[3]||(e[3]=t("label",null,"场地面积：",-1)),t("span",null,n(l.value.area)+"㎡",1)]),t("div",ye,[e[4]||(e[4]=t("label",null,"可容纳人数：",-1)),t("span",null,n(l.value.capacity)+"人",1)]),t("div",he,[e[5]||(e[5]=t("label",null,"地面类型：",-1)),t("span",null,n(l.value.floorType||"未设置"),1)]),l.value.facilities?(i(),u("div",ke,[e[6]||(e[6]=t("label",null,"场地设施：",-1)),t("div",we,[(i(!0),u(w,null,N($.value,s=>(i(),g(f,{key:s,size:"small",type:"info"},{default:o(()=>[d(n(s),1)]),_:2},1024))),128))])])):_("",!0),l.value.description?(i(),u("div",Ce,[e[7]||(e[7]=t("label",null,"场地描述：",-1)),t("p",Le,n(l.value.description),1)])):_("",!0),a(T),t("div",Be,[l.value.status===1?(i(),g(D,{key:0,type:"primary",size:"large",onClick:G},{default:o(()=>[...e[8]||(e[8]=[d(" 立即预订 ",-1)])]),_:1})):_("",!0),a(D,{size:"large",onClick:r.handleBack},{default:o(()=>[...e[9]||(e[9]=[d(" 返回列表 ",-1)])]),_:1},8,["onClick"])])])]),_:1})]),_:1})]),_:1}),F((i(),g(E,{class:"price-card",shadow:"never"},{header:o(()=>[...e[10]||(e[10]=[t("span",null,"价格信息",-1)])]),default:o(()=>[k.value.length>0?(i(),u("div",Ve,[a(J,{data:k.value,border:"",stripe:""},{default:o(()=>[a(b,{label:"时段类型",width:"120"},{default:o(({row:s})=>[d(n(U[s.timeType]||s.timeType),1)]),_:1}),a(b,{label:"时间段",width:"200"},{default:o(({row:s})=>[d(n(s.startTime)+" - "+n(s.endTime),1)]),_:1}),a(b,{label:"标准价格",width:"120"},{default:o(({row:s})=>[t("span",Te,"¥"+n(s.price)+"/小时",1)]),_:1}),a(b,{label:"会员折扣价",width:"150"},{default:o(({row:s})=>[t("span",De,"¥"+n(j(s.price))+"/小时",1)]),_:1})]),_:1},8,["data"])])):(i(),g(K,{key:1,description:"暂无价格配置"}))]),_:1})),[[x,h.value]])],64)):_("",!0)])),[[x,y.value]])])}}},Ne=W(Ee,[["__scopeId","data-v-68e88d43"]]);export{Ne as default};
